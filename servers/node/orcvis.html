<!doctype html>
<html>
  <head>
    <title>Mobile Orchestra Visualization</title>
    <script src="/socket.io/socket.io.js"></script>
    <script src="jquery.js"></script>
    <script src="nexusUI.js"></script>
  </head>
  <body>

        <script>

            var socket = io.connect('http://localhost:8080');

            socket.on('tovispage', function (data) {

              console.log(data)
              eval(data.oscName.replace("/","")+".set(data.data)")
        
            })


            socket.on('addphone', function (data) {
              console.log(data)
              var html = '<div class="phoneview" style="background-color:#333;position:relative;border-radius:30px;padding:40px 10px 30px 10px;display:inline-block">'
                       + '<div style="background-color:white;height:600px;width:400px;position:relative">'

              for (var i=0;i<data.length;i++) {
                  html+= '<canvas nx="'+data[i].type+'" id="'+data[i].oscName+'" style="position:absolute;left:'+data[i].x/2+'px;top:'+data[i].y/2+'px;width:'+data[i].width/2+'px;height:'+data[i].height/2+'px;"></canvas>'
              }

              html += '</div></div>'

              $("body").append(html);

              transformCanvases()

            })

        </script>

        <style>

          .phoneview {
              transition: all 0.85s cubic-bezier(0.175,0.885,0.320,1.275);
              -webkit-perspective: 300px;
              -webkit-transform: rotateY(20deg) rotateX(50deg);
              -webkit-transform-style: preserve-3d;
          }

        </style>


    
  </body>
</html>