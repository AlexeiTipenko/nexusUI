<!doctype html>
   	<html>
	<head>
		<title>NX Node Demo</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<script src="/socket.io/socket.io.js"></script>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="nexusUI.js"></script>
	
		<script>


			var socket = io.connect('http://localhost:8080');

			var thisUser = {
				name: "phone" + ~~(Math.random()*10000000000)
			}

			// on connection to server
			socket.on('connect', function() {

				thisUser.gui = new Array()

				for (var i=0;i<nx.nxObjects.length;i++) {
					thisUser.gui.push({
						type: nx.nxObjects[i].getName(),
						x: nx.nxObjects[i].offset.left,
						y: nx.nxObjects[i].offset.top,
						width: nx.nxObjects[i].width,
						height: nx.nxObjects[i].height,
						oscName: nx.nxObjects[i].oscName
					})
					thisUser.gui[i].oscName = thisUser.gui[i].oscName.replace("/","")
				}
				console.log(nx.nxObjects)
				socket.emit('adduser', thisUser);
			});


			nx.onload = function() {

				nx.sendsTo("node")

				tilt1.sendsTo("js")

				tilt1.response = function(data) {
					data.name = thisUser.name;
					socket.emit('tiltuser', data)
				} 
			
			}
		
		</script>
		
	</head>
	
	<body>
	
		<canvas nx="dial"></canvas>
		<canvas nx="position"></canvas>
		<canvas nx="slider"></canvas>
		<canvas nx="tilt"></canvas>
	
	</body>
	
</html>