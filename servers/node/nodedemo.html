<!doctype html>
   	<html>
	<head>
		<title>NX Node Demo</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<script src="/socket.io/socket.io.js"></script>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="nexusUI.js"></script>
	
		<script>


			var socket = io.connect('http://localhost:8080');

			var thisUser = new Object();

			// on connection to server
			socket.on('connect', function() {

				thisUser = {
					name: 'benji',
					gui: new Array()
				}
				for (var i=0;i<nx.nxObjects.length;i++) {
					thisUser.gui.push({
						type: nx.nxObjects[i].getName(),
						x: nx.nxObjects[i].offset.left,
						y: nx.nxObjects[i].offset.top,
						width: nx.nxObjects[i].width,
						height: nx.nxObjects[i].height,
						oscName: nx.nxObjects[i].oscName
					})
					thisUser.gui[i].oscName = thisUser.gui[i].oscName.replace("/","")
				}
				console.log(nx.nxObjects)
				socket.emit('adduser', thisUser);
			});


			nx.onload = function() {

				nx.sendsTo("node")
			
			}





			/*	nx.allTraffic = function(element,data) {
					if (Array.isArray(data)) {
						data = data.join();
						data = data.replace(/\,/g," ");
					} 
					var nodemsg = {
						'oscName': element.oscName,
						'value': data
					}
					console.log(data)
            		socket.emit('nx', nodemsg);
				} */
		
		</script>
		
	</head>
	
	<body>
	
		<canvas nx="dial"></canvas>
		<canvas nx="position"></canvas>
		<canvas nx="slider"></canvas>
	
	</body>
	
</html>