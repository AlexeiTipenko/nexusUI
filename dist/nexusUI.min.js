!function t(i,e,s){function h(n,l){if(!e[n]){if(!i[n]){var r="function"==typeof require&&require;if(!l&&r)return r(n,!0);if(o)return o(n,!0);var a=new Error("Cannot find module '"+n+"'");throw a.code="MODULE_NOT_FOUND",a}var c=e[n]={exports:{}};i[n][0].call(c.exports,function(t){var e=i[n][1][t];return h(e?e:t)},c,c.exports,t,i,e,s)}return e[n].exports}for(var o="function"==typeof require&&require,n=0;n<s.length;n++)h(s[n]);return h}({1:[function(t){var e=t("./lib/core/manager");window.nx=new e,window.nx.onload=function(){},window.onload=function(){nx.addStylesheet();var t=document.getElementsByTagName("canvas");for(i=0;i<t.length;i++)nx.createNxObject(t[i]);nx.is_touch_device&&(document.addEventListener("touchmove",nx.blockMove,!0),document.addEventListener("touchstart",nx.blockMove,!0)),nx.onload(),nx.startPulse()}},{"./lib/core/manager":2}],2:[function(t,e){var s=(t("../utils/timing"),e.exports=function(){this.nxObjects=new Object,this.nxThrottlePeriod=20,this.elemTypeArr=new Array,this.aniItems=new Array,this.editmode=!1,this.isErasing=!1,this.isResizing=!1,this.showLabels=!1,canvasgridy=10,canvasgridx=10,this.starttime=(new Date).getTime(),this.transmissionProtocol="js",this.ajaxPath="lib/nexusOSCRelay.php",this.is_touch_device="ontouchstart"in document.documentElement?!0:!1,this.metas=document.getElementsByTagName("meta")});s.prototype.createNxObject=function(i){var e,s=i.getAttribute("nx"),h=0;for(j=0;j<this.elemTypeArr.length;j++)this.elemTypeArr[j]===s&&h++;if(this.elemTypeArr.push(s),!i.id){var o=h+1;i.id=s+o}if(s)try{e=new(t("../widgets")[s])(i.id)}catch(n){console.log(s)}return this.nxObjects[e.canvasID]=e,e},s.prototype.colorize=function(t,i){i||(i=t,t="accent"),this.colors[t]=i;for(var e in this.nxObjects)this.nxObjects[e].colors[t]=i,this.nxObjects[e].draw()},s.prototype.setNxThrottlePeriod=function(t){this.nxThrottlePeriod=t;for(var i in this.nxObjects)this.nxObjects[i].nxThrottlePeriod=this.nxThrottlePeriod},s.prototype.sendsTo=function(t){this.transmissionProtocol=t;for(var i in this.nxObjects)this.nxObjects[i].transmissionProtocol=t},s.prototype.setAjaxPath=function(t){this.ajaxPath=t},s.prototype.colors={accent:"#ff5500",fill:"#f5f5f5",border:"#999",accentborder:"#aa2200",black:"#000",white:"#FFF",highlight:"rgba(255,85,0,0.5)"},s.prototype.startPulse=function(){this.pulseInt=setInterval("nx.pulse()",30)},s.prototype.stopPulse=function(){clearInterval(this.pulseInt)},s.prototype.pulse=function(){for(var t=0;t<this.aniItems.length;t++)this.aniItems[t]()},s.prototype.addStylesheet=function(){var t="<style>select {background: transparent;-webkit-appearance: none;width: 150px;padding: 5px 5px;font-size: 16px;color:#888;border: solid 2px #CCC;border-radius: 6;outline: black;cursor:pointer;background-color:#F7F7F7;font-family:gill sans;}canvas { cursor:pointer; }</style>";document.body.innerHTML=document.body.innerHTML+t},s.prototype.setViewport=function(t){for(i=0;i<this.metas.length;i++)"viewport"==this.metas[i].name&&(this.metas[i].content="minimum-scale="+t+", maximum-scale="+t)},s.prototype.highlightEditedObj=function(){for(var t=document.getElementsByTagName("canvas"),i=0;i<t.length;i++)t[i].style.zindex+="1";var e=document.getElementsByTagName(globaldragid);e.style.zindex=2},s.prototype.setLabels=function(t){this.showLabels="on"==t?!0:!1;for(var i in this.nxObjects)this.nxObjects[i].draw()}},{"../utils/timing":7,"../widgets":14}],3:[function(require,module,exports){var EventEmitter=require("events").EventEmitter,util=require("util"),domUtils=require("../utils/dom"),drawingUtils=require("../utils/drawing"),timingUtils=require("../utils/timing"),widget=module.exports=function(t){if(EventEmitter.apply(this),this.preClick=this.preClick.bind(this),this.preMove=this.preMove.bind(this),this.preRelease=this.preRelease.bind(this),this.preTouch=this.preTouch.bind(this),this.preTouchMove=this.preTouchMove.bind(this),this.preTouchRelease=this.preTouchRelease.bind(this),this.canvasID=t,this.oscPath="/"+t,!document.getElementById(t)){var i=document.createElement("canvas");i.id=t,document.body.appendChild(i)}this.canvas=document.getElementById(t),this.context=this.canvas.getContext("2d"),this.canvas.height=window.getComputedStyle(document.getElementById(t),null).getPropertyValue("height").replace("px",""),this.canvas.width=window.getComputedStyle(document.getElementById(t),null).getPropertyValue("width").replace("px",""),this.height=parseInt(window.getComputedStyle(document.getElementById(t),null).getPropertyValue("height").replace("px","")),this.width=parseInt(window.getComputedStyle(document.getElementById(t),null).getPropertyValue("width").replace("px","")),300==this.width&&150==this.height&&(this.canvas.width=this.defaultSize.width,this.canvas.height=this.defaultSize.height,this.width=this.defaultSize.width,this.height=this.defaultSize.height),this.offset={left:domUtils.findPosition(this.canvas).left,top:domUtils.findPosition(this.canvas).top},this.center={x:this.width/2,y:this.height/2},this.corners={TLx:0,TLy:0,TRx:this.width,TRy:0,BRx:this.width,BRy:this.height,BLx:0,BLy:this.height},this.lineWidth=2,this.padding=2,this.colors=new Object,this.colors.accent=nx.colors.accent,this.colors.fill=nx.colors.fill,this.colors.border=nx.colors.border,this.colors.accentborder=nx.colors.accentborder,this.colors.black=nx.colors.black,this.colors.white=nx.colors.white,this.colors.highlight=nx.colors.highlight,this.clickPos={x:0,y:0},this.clickPos.touches=new Array,this.clicked=!1,this.value=0,this.val=new Object,this.nodePos=new Array,this.deltaMove=new Object,this.nxThrottlePeriod=nx.nxThrottlePeriod,this.isBeingDragged=!1,this.isBeingResized=!1,this.label=!1,this.isRecording=!1,this.tapeNum=0,this.recorder=null,nx.editmode,this.is_touch_device="ontouchstart"in document.documentElement?!0:!1,this.events=new Object,this.is_touch_device?(this.canvas.ontouchstart=this.preTouch,this.canvas.ontouchmove=timingUtils.nxThrottle(this.preTouchMove,this.nxThrottlePeriod),this.canvas.ontouchend=this.preTouchRelease):this.canvas.addEventListener("mousedown",this.preClick,!1)};util.inherits(widget,EventEmitter),widget.prototype.nxTransmit=function(t){"js"==this.transmissionProtocol?this.makeOSC(this.emit,t):"ajax"==this.transmissionProtocol&&this.makeOSC(this.ajaxTransmit,t)},widget.prototype.makeOSC=function(t,i){if(this.action=t,"object"==typeof i&&null!==i)for(var e in i)if("object"==typeof i[e]&&null!==i[e])for(var s in i[e])this.action(e+"/"+s,i[e][s]);else this.action(e,i[e]);else("number"==typeof i||"string"==typeof i)&&this.action("value",i)},widget.prototype.ajaxTransmit=function(t,i){var e=this.oscPath+"/"+t;xmlhttp=new XMLHttpRequest,xmlhttp.open("POST",nx.ajaxPath,!0),xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xmlhttp.send("oscName="+e+"&data="+i)},widget.prototype.preClick=function(t){this.offset={left:domUtils.findPosition(this.canvas).left,top:domUtils.findPosition(this.canvas).top},document.addEventListener("mousemove",this.preMove,!1),document.addEventListener("mouseup",this.preRelease,!1),this.clickPos=domUtils.getCursorPosition(t,this.offset),this.clicked=!0,this.deltaMove.x=0,this.deltaMove.y=0,nx.editmode?(this.clickPos.x>this.width-20&&this.clickPos.y>this.height-20?this.isBeingResized=!0:(this.isBeingResized=!1,this.isBeingDragged=!0),globaldragid=this.canvasID,showSettings(),nx.isErasing&&this.destroy()):this.click(t),document.body.style.userSelect="none",document.body.style.mozUserSelect="none",document.body.style.webkitUserSelect="none"},widget.prototype.preMove=function(t){var i=domUtils.getCursorPosition(t,this.offset);if(this.deltaMove.y=i.y-this.clickPos.y,this.deltaMove.x=i.x-this.clickPos.x,this.clickPos=i,nx.editmode){if(this.isBeingResized)console.log("resizing..."),this.canvas.width=~~(this.clickPos.x/(canvasgridx/2))*(canvasgridx/2),this.canvas.height=~~(this.clickPos.y/(canvasgridy/2))*(canvasgridy/2),this.canvas.height=window.getComputedStyle(document.getElementById(target),null).getPropertyValue("height").replace("px",""),this.canvas.width=window.getComputedStyle(document.getElementById(target),null).getPropertyValue("width").replace("px",""),this.height=parseInt(window.getComputedStyle(document.getElementById(target),null).getPropertyValue("height").replace("px","")),this.width=parseInt(window.getComputedStyle(document.getElementById(target),null).getPropertyValue("width").replace("px","")),this.center={x:this.width/2,y:this.height/2},this.corners={TLx:0,TLy:0,TRx:this.width,TRy:0,BRx:this.width,BRy:this.height,BLx:0,BLy:this.height},this.init(),this.draw();else if(this.isBeingDragged){var e=~~((t.pageY-this.height/2)/canvasgridy)*canvasgridy,s=~~((t.pageX-this.width/2)/canvasgridx)*canvasgridx;this.canvas.style.top=e+"px",this.canvas.style.left=s+"px",this.offset={left:domUtils.findPosition(this.canvas).left,top:domUtils.findPosition(this.canvas).top}}}else this.move(t)},widget.prototype.preRelease=function(){document.removeEventListener("mousemove",this.preMove,!1),this.clicked=!1,nx.editmode?this.isBeingDragged=!1:this.release(),document.removeEventListener("mouseup",this.preRelease,!1),document.body.style.userSelect="text",document.body.style.mozUserSelect="text",document.body.style.webkitUserSelect="text"},widget.prototype.preTouch=function(t){this.clickPos=domUtils.getTouchPosition(t,this.offset),this.clicked=!0,this.deltaMove.x=0,this.deltaMove.y=0,nx.editmode?(nx.isResizing?this.isBeingResized=!0:this.isBeingDragged=!0,globaldragid=this.canvasID,showSettings(),nx.isErasing&&this.destroy()):this.touch(t)},widget.prototype.preTouchMove=function(t){if(this.clicked){var i=domUtils.getTouchPosition(t,this.offset);if(this.deltaMove.y=i.y-this.clickPos.y,this.deltaMove.x=i.x-this.clickPos.x,this.clickPos=i,nx.editmode)if(this.isBeingDragged){var e=~~((t.targetTouches[0].pageY-this.height/2)/canvasgridy)*canvasgridy,s=~~((t.targetTouches[0].pageX-this.width/2)/canvasgridx)*canvasgridx;this.canvas.style.top=e+"px",this.canvas.style.left=s+"px",this.offset={left:domUtils.findPosition(this.canvas).left,top:domUtils.findPosition(this.canvas).top}}else this.isBeingResized&&(this.canvas.width=~~(t.targetTouches[0].pageX/(canvasgridx/2))*(canvasgridx/2),this.canvas.height=~~(t.targetTouches[0].pageY/(canvasgridy/2))*(canvasgridy/2),this.canvas.height=window.getComputedStyle(document.getElementById(target),null).getPropertyValue("height").replace("px",""),this.canvas.width=window.getComputedStyle(document.getElementById(target),null).getPropertyValue("width").replace("px",""),this.height=parseInt(window.getComputedStyle(document.getElementById(target),null).getPropertyValue("height").replace("px","")),this.width=parseInt(window.getComputedStyle(document.getElementById(target),null).getPropertyValue("width").replace("px","")),this.center={x:this.width/2,y:this.height/2},this.corners={TLx:0,TLy:0,TRx:this.width,TRy:0,BRx:this.width,BRy:this.height,BLx:0,BLy:this.height},this.init(),this.draw());else this.touchMove(t)}},widget.prototype.preTouchRelease=function(t){if(t.targetTouches.length>=1){var i=domUtils.getTouchPosition(t,this.offset);this.clickPos=i}else this.clicked=!1;nx.editmode?(this.isBeingDragged=!1,globaldragid=!1):this.touchRelease()},widget.prototype.draw=function(){},widget.prototype.click=function(){},widget.prototype.move=function(){},widget.prototype.release=function(){},widget.prototype.touch=function(){this.click()},widget.prototype.touchMove=function(){this.move()},widget.prototype.touchRelease=function(){this.release()},widget.prototype.adjustSizeIfDefault=function(){300==this.width&&150==this.height&&(this.canvas.width=this.defaultSize.width,this.canvas.height=this.defaultSize.height,this.width=this.defaultSize.width,this.height=this.defaultSize.height)},widget.prototype.makeRoundedBG=function(){this.bgLeft=this.lineWidth,this.bgRight=this.width-this.lineWidth,this.bgTop=this.lineWidth,this.bgBottom=this.height-this.lineWidth,this.bgHeight=this.bgBottom-this.lineWidth,this.bgWidth=this.bgRight-this.lineWidth,drawingUtils.makeRoundRect(this.context,this.bgLeft,this.bgTop,this.bgWidth,this.bgHeight)},widget.prototype.erase=function(){this.context.clearRect(0,0,this.width,this.height)},widget.prototype.hideCursor=function(){this.canvas.style.cursor="none"},widget.prototype.showCursor=function(){this.canvas.style.cursor="auto"},widget.prototype.getName=function(){var t=/function (.{1,})\(/,i=t.exec(this.constructor.toString());return i&&i.length>1?i[1]:""},widget.prototype.set=function(t,i){if("object"==typeof this.val&&"null"!==this.val){if("object"==typeof t&&"null"!==t)for(var e in t)this.val[e]=t[e]}else("string"==typeof this.val||"number"==typeof this.val)&&("object"==typeof t&&"null"!==t?(this.val=t.value,this.draw()):("string"==typeof t||"number"==typeof t)&&(this.val=t));this.draw(),i&&nx.transmit(this.val)},widget.prototype.destroy=function(){nx.nxObjects[this.canvasID]=null;var t=nx.elemTypeArr.indexOf(this.getName());nx.elemTypeArr.splice(t,1),this.canvas.ontouchmove=null,this.canvas.ontouchend=null,this.canvas.onclick=null,this.canvas.onmousemove=null,this.canvas.onmouseoff=null,document.removeEventListener("mousemove",this.preMove,!1),document.removeEventListener("mouseup",this.preRelease,!1);var i=document.getElementById(this.canvasID);i.parentNode.removeChild(i),delete window[this.canvasID]},widget.prototype.wrapText=function(t,i,e,s,h){if(t){for(var o=t.split(" "),n="",l=0;l<o.length;l++){var r=n+o[l]+" ",a=this.context.measureText(r),c=a.width;c>s&&l>0?(this.context.fillText(n,i,e),n=o[l]+" ",e+=h):n=r}this.context.fillText(n,i,e)}},widget.prototype.drawLabel=function(){if(this.showLabels)with(this.context)globalAlpha=.9,fillStyle=this.colors.fill,fillRect(this.width-100,this.height-20,100,20),globalAlpha=1,beginPath(),fillStyle=this.colors.border,font="bold 15px courier",textAlign="center",fillText(this.canvasID,this.width-50,this.height-5),textAlign="left",closePath()},widget.prototype.saveCanv=function(){var t=this.canvas.toDataURL("image/png").replace("image/png","image/octet-stream");window.location.href=t}},{"../utils/dom":4,"../utils/drawing":5,"../utils/timing":7,events:36,util:40}],4:[function(t,i,e){e.findPosition=function(t){var i=document.body,e=document.defaultView,s=document.documentElement,h=document.createElement("div");h.style.paddingLeft=h.style.width="1px",i.appendChild(h);var o=2==h.offsetWidth;i.removeChild(h),h=t.getBoundingClientRect();var n=s.clientTop||i.clientTop||0,l=s.clientLeft||i.clientLeft||0,r=e.pageYOffset||o&&s.scrollTop||i.scrollTop,a=e.pageXOffset||o&&s.scrollLeft||i.scrollLeft;return{top:h.top+r-n,left:h.left+a-l}},e.getCursorPosition=function(t,i){var e,s;void 0!=t.pageX&&void 0!=t.pageY?(e=t.pageX,s=t.pageY):(e=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,s=t.clientY+document.body.scrollTop+document.documentElement.scrollTop),e-=i.left,s-=i.top;var h={x:e,y:s};return h.touches=[{x:e,y:s}],h},e.getTouchPosition=function(t,i){var e,s;e=t.targetTouches[0].pageX,s=t.targetTouches[0].pageY,e-=i.left,s-=i.top;var h={x:e,y:s};console.log("touches="+t.touches.length),console.log("target="+t.targetTouches.length),console.log("changed="+t.changedTouches.length),h.touches=new Array;for(var o=0;o<t.targetTouches.length;o++)h.touches.push({x:t.targetTouches[o].pageX-i.left,y:t.targetTouches[o].pageY-i.top});return h}},{}],5:[function(require,module,exports){var math=require("./math");exports.randomColor=function(){return"rgb("+math.randomNum(250)+","+math.randomNum(250)+","+math.randomNum(250)+")"},exports.hexToRgb=function(t,i){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(t,i,e,s){return i+i+e+e+s+s});var s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);i||(i=.5);var h=parseInt(s[1],16),o=parseInt(s[2],16),n=parseInt(s[3],16);return"rgba("+h+","+o+","+n+","+i+")"},exports.isInside=function(t,i){return t.x>i.xpos&&t.x<i.xpos+i.wid&&t.y>i.ypos&&t.y<i.ypos+i.hgt?!0:!1},exports.makeRoundRect=function(t,i,e,s,h,o){var n=i,l=e,r=s+n,a=h+l;o||(o=2),t.beginPath(),t.moveTo(n+o,l),t.lineTo(r-o,l),t.quadraticCurveTo(r,l,r,l+o),t.lineTo(r,a-o),t.quadraticCurveTo(r,a,r-o,a),t.lineTo(n+o,a),t.quadraticCurveTo(n,a,n,a-o),t.lineTo(n,l+o),t.quadraticCurveTo(n,l,n+o,l),t.closePath()},exports.text=function(context,text,position){with(position||(position=[10,10]),context)beginPath(),font="bold 12px sans-serif",fillText(text,position[0],position[1]),closePath()}},{"./math":6}],6:[function(t,i,e){e.toPolar=function(t,i){var e=Math.sqrt(t*t+i*i),s=Math.atan2(i,t);return 0>s&&(s+=2*Math.PI),{x:e,y:s}},e.toCartesian=function(t,i){var e=Math.cos(i),s=Math.sin(i);return{x:t*e,y:t*s*-1}},e.clip=function(t,i,e){return Math.min(e,Math.max(i,t))},e.prune=function(t,i){var i=Math.pow(10,i);if("number"==typeof t)t=Math.round(t*i)/i;else if(t instanceof Array)for(var e=0;e<t.length;e++)"number"==typeof t[e]&&(t[e]=Math.round(t[e]*i)/i);return t},e.scale=function(t,i,e,s,h){return(t-i)*(h-s)/(e-i)+s},e.invert=function(t){return e.scale(t,1,0,0,1)},e.bounce=function(t,i,e,s){return t>i&&e>t?s:i>=t?Math.abs(s):t>=e?-1*Math.abs(s):void 0},e.mtof=function(t){return 440*Math.pow(2,(t-69)/12)},e.randomNum=function(t){return Math.floor(Math.random()*t)}},{}],7:[function(t,i,e){e.nxThrottle=function(t,i){var e;return function(){var s=this,h=arguments;e||(e=setTimeout(function(){e=null;try{t.apply(s,h)}catch(i){console.log(i)}},i))}}},{}],8:[function(require,module,exports){var util=require("util"),widget=require("../core/widget"),banner=module.exports=function(t){this.defaultSize={width:100,height:40},widget.call(this,t),this.message1="Powered by",this.message2="* Nexus UI *",this.message3="nexusosc.com"};util.inherits(banner,widget),banner.prototype.init=function(){this.draw()},banner.prototype.draw=function(){with(this.context)globalAlpha=.1,fillStyle=this.colors.accent,beginPath(),moveTo(0,10),lineTo(10,this.height/2+5),lineTo(0,this.height),lineTo(30,this.height),lineTo(30,10),fill(),moveTo(this.width-30,10),lineTo(this.width-30,this.height),lineTo(this.width,this.height),lineTo(this.width-10,this.height/2+5),lineTo(this.width,10),fill(),closePath(),globalAlpha=1,fillStyle=this.colors.accent,fillRect(15,0,this.width-30,this.height-10),fillStyle=this.colors.white,font=this.height/5+"px courier",textAlign="center",fillText(this.message1,this.width/2,this.height/3.3),fillText(this.message2,this.width/2,this.height/3.3*2),fillStyle=this.colors.black,beginPath(),moveTo(15,this.height-10),lineTo(30,this.height),lineTo(30,this.height-10),lineTo(15,this.height-10),fill(),moveTo(this.width-15,this.height-10),lineTo(this.width-30,this.height),lineTo(this.width-30,this.height-10),lineTo(this.width-15,this.height-10),fill(),closePath()},banner.prototype.click=function(){window.location="http://www.nexusosc.com"}},{"../core/widget":3,util:40}],9:[function(require,module,exports){var util=require("util"),widget=require("../core/widget"),button=module.exports=function(t){this.defaultSize={width:50,height:50},widget.call(this,t),this.value=1,this.val={press:0},this.mode="toggle",this.image=null,this.imageHover=null,this.imageTouch=null,this.init()};util.inherits(button,widget),button.prototype.init=function(){this.width=this.canvas.width,this.height=this.canvas.height,this.draw()},button.prototype.draw=function(){with(this.context)clearRect(0,0,this.width,this.height),lineWidth=this.lineWidth,null!==this.image?this.val.press?this.imageTouch?drawImage(this.imageTouch,0,0):(fillStyle=this.colors.highlight,strokeStyle=this.colors.accent,drawImage(this.image,0,0),globalAlpha=.5,fillRect(0,0,this.width,this.height),strokeRect(0,0,this.width,this.height),globalAlpha=1):drawImage(this.image,0,0):(this.val.press?this.val.press&&(fillStyle=this.colors.accent,strokeStyle=this.colors.accent):(fillStyle=this.colors.fill,strokeStyle=this.colors.border),beginPath(),arc(this.center.x,this.center.y,Math.min(this.center.x,this.center.y)-this.lineWidth/2,0,2*Math.PI,!0),fill(),stroke(),closePath(),this.clicked&&"node"==this.mode&&(globalAlpha=.2,fillStyle="#fff",beginPath(),arc(this.val.x,this.val.y,Math.min(this.center.x,this.center.y)/2,0,2*Math.PI,!0),fill(),closePath(),globalAlpha=1)),this.drawLabel()},button.prototype.click=function(){this.val.press=this.value*this.clicked,"node"==this.mode&&(this.val.x=this.clickPos.x,this.val.y=this.clickPos.y),this.nxTransmit(this.val),this.draw()},button.prototype.move=function(){"node"==this.mode&&(this.val.x=this.clickPos.x,this.val.y=this.clickPos.y,this.nxTransmit(this.val),this.draw())},button.prototype.release=function(){this.val.press=this.value*this.clicked,("toggle"==this.mode||"node"==this.mode)&&this.nxTransmit(this.val),this.draw()},button.prototype.setImage=function(t){this.image=new Image,this.image.onload=function(){this.draw()},this.image.src=t},button.prototype.setHoverImage=function(t){this.imageHover=new Image,this.imageHover.onload=function(){this.draw()},this.imageHover.src=t},button.prototype.setTouchImage=function(t){this.imageTouch=new Image,this.imageTouch.onload=this.draw(),this.imageTouch.src=t}},{"../core/widget":3,util:40}],10:[function(require,module,exports){var util=require("util"),widget=require("../core/widget"),colors=module.exports=function(t){this.defaultSize={width:100,height:100},widget.call(this,t);this.color_width=this.canvas.width-2*this.lineWidth,this.color_height=this.canvas.height-2*this.lineWidth,this.color_table=new Array,this.saturation=240,this.color=[0,0,0],this.init()};util.inherits(colors,widget),colors.prototype.init=function(){this.color_table=new Array(this.color_width);for(var t=0;t<this.color_table.length;t++)this.color_table[t]=new Array(this.color_height);for(var t=0;t<this.color_width;t++){h=Math.round(240/this.color_width*t);for(var i=0;i<this.color_height;i++)s=this.saturation,l=Math.round(100/this.color_height*i),this.color_table[t][i]=[h,s,l]}this.draw()},colors.prototype.draw=function(){with(this.erase(),this.makeRoundedBG(),this.context)fillStyle=this.colors.fill,strokeStyle=this.colors.border,fill(),stroke();for(var i=0;i<this.color_width;i++)for(var j=0;j<this.color_height;j++)with(hue=this.color_table[i][j][0],sat=this.color_table[i][j][1],lum=this.color_table[i][j][2],this.context)beginPath(),fillStyle="hsl("+hue+", "+sat+"%, "+lum+"%)",fillRect(i+this.padding,j+this.padding,240/this.color_width,240/this.color_height),fill(),closePath();this.drawLabel()},colors.prototype.drawColor=function(){with(this.context)fillStyle="rgb("+this.val.r+","+this.val.g+","+this.val.b+")",beginPath(),arc(this.width/8,this.height-this.height/8,this.width/10,0,2*Math.PI),fill(),closePath()},colors.prototype.click=function(){var t=this.context.getImageData(this.clickPos.x,this.clickPos.y,1,1);this.val={r:t.data[0],g:t.data[1],b:t.data[2]},this.nxTransmit(this.val),this.drawColor()},colors.prototype.move=function(t){this.click(t)}},{"../core/widget":3,util:40}],11:[function(require,module,exports){var util=require("util"),widget=require("../core/widget"),comment=module.exports=function(t){this.defaultSize={width:75,height:25},widget.call(this,t),this.val={text:"comment"},this.sizeSet=!1,this.init()};util.inherits(comment,widget),comment.prototype.setSize=function(t){this.size=t,this.sizeSet=!0,this.draw()},comment.prototype.init=function(){this.draw()},comment.prototype.draw=function(){with(this.sizeSet||(this.size=Math.sqrt(this.width*this.height/this.val.text.length)),this.erase(),this.context)globalAlpha=1,fillStyle=this.colors.fill,fillRect(0,0,this.width,this.height),strokeStyle=this.colors.border,lineWidth=3,strokeStyle=this.colors.accent,strokeRect(0,0,this.width,this.height),beginPath(),moveTo(0,this.height),lineTo(this.width,this.height),strokeStyle=this.colors.accent,stroke(),closePath(),globalAlpha=1,fillStyle=this.colors.black,textAlign="left",font=this.size+"px Gill Sans";this.wrapText(this.val.text,6,3+this.size,this.width-6,this.size)}},{"../core/widget":3,util:40}],12:[function(require,module,exports){var math=require("../utils/math"),util=require("util"),widget=require("../core/widget"),dial=module.exports=function(t){this.defaultSize={width:50,height:50},widget.call(this,t),this.circle_size=1,this.dial_position_length=6,this.accentWidth=this.width<101||this.width<101?1*this.lineWidth:2*this.lineWidth,this.val={value:0},this.responsivity=.005,this.throttle=nx.throttle,this.aniStart=0,this.aniStop=1,this.aniMove=.01,this.init()};util.inherits(dial,widget),dial.prototype.init=function(){return this.circle_size=Math.min(this.center.x,this.center.y)-this.lineWidth,this.dial_position_length=this.circle_size+this.lineWidth,this.width<101&&(this.dial_position_length--,this.dial_position_length--),this.draw(),1},dial.prototype.draw=function(){var dial_angle=2*(1-this.val.value)*Math.PI+1.5*Math.PI,dial_position=2*(this.val.value+.25)*Math.PI,point=math.toCartesian(this.dial_position_length,dial_angle);with(this.isRecording&&this.recorder.write(this.tapeNum,this.val.value),this.context)clearRect(0,0,this.width,this.height),strokeStyle=this.colors.border,fillStyle=this.colors.fill,lineWidth=this.lineWidth,beginPath(),arc(this.center.x,this.center.y,this.circle_size,0,2*Math.PI,!0),fill(),stroke(),closePath(),beginPath(),lineWidth=this.accentWidth,arc(this.center.x,this.center.y,this.circle_size,.5*Math.PI,dial_position,!1),lineTo(this.center.x,this.center.y),globalAlpha=.1,fillStyle=this.colors.accent,fill(),globalAlpha=1,closePath(),beginPath(),lineWidth=this.accentWidth,arc(this.center.x,this.center.y,this.circle_size,.5*Math.PI,dial_position,!1),strokeStyle=this.colors.accent,stroke(),closePath(),beginPath(),lineWidth=this.accentWidth,strokeStyle=this.colors.accent,moveTo(this.center.x,this.center.y),lineTo(point.x+this.center.x,point.y+this.center.y),stroke(),closePath(),beginPath(),fillStyle=this.colors.accent,arc(this.center.x,this.center.y,this.circle_size/8,0,2*Math.PI,!1),fill(),closePath();this.drawLabel()},dial.prototype.click=function(){this.val.value=math.prune(this.val.value,3),this.nxTransmit(this.val),this.draw(),this.aniStart=this.val.value},dial.prototype.move=function(){this.val.value=math.clip(this.val.value-this.deltaMove.y*this.responsivity,0,1),this.val.value=math.prune(this.val.value,3),this.nxTransmit(this.val),this.draw()},dial.prototype.release=function(){this.aniStop=this.val.value},dial.prototype.animate=function(t){switch(t){case"bounce":nx.aniItems.push(this.aniBounce.bind(this));break;case"none":nx.aniItems.splice(nx.aniItems.indexOf(this.aniBounce))}},dial.prototype.aniBounce=function(){this.clicked||(this.val.value+=this.aniMove,this.aniStop<this.aniStart&&(this.stopPlaceholder=this.aniStop,this.aniStop=this.aniStart,this.aniStart=this.stopPlaceholder),this.aniMove=math.bounce(this.val.value,this.aniStart,this.aniStop,this.aniMove),this.draw(),this.val.value=math.prune(this.val.value,3),this.nxTransmit(this.val))}},{"../core/widget":3,"../utils/math":6,util:40}],13:[function(require,module,exports){var math=require("../utils/math"),util=require("util"),widget=require("../core/widget"),envelope=module.exports=function(t){this.defaultSize={width:75,height:75},widget.call(this,t),this.nodeSize=5,this.active=!1,this.duration=1,this.val={x:.15,y:.5,amp:0,index:0},this.init()};util.inherits(envelope,widget),envelope.prototype.init=function(){this.actualWid=this.width-2*this.lineWidth-2*this.nodeSize,this.actualHgt=this.height-2*this.lineWidth-2*this.nodeSize,this.draw(),nx.aniItems.push(this.advance)},envelope.prototype.draw=function(){with(this.erase(),this.makeRoundedBG(),this.context){strokeStyle=this.colors.border,fillStyle=this.colors.fill,lineWidth=this.lineWidth,stroke(),fill();var drawingX=this.val.x*this.actualWid+this.nodeSize+this.lineWidth,drawingY=this.val.y*this.actualHgt+this.nodeSize+this.lineWidth;with(drawingX<this.bgLeft+this.nodeSize?drawingX=this.bgLeft+this.nodeSize:drawingX>this.bgRight-this.nodeSize&&(drawingX=this.bgRight-this.nodeSize),drawingY<this.bgTop+this.nodeSize?drawingY=this.bgTop+this.nodeSize:drawingY>this.bgBottom-this.nodeSize&&(drawingY=this.bgBottom-this.nodeSize),this.context)beginPath(),strokeStyle=this.colors.accent,moveTo(this.padding,this.height-this.padding),lineTo(drawingX,drawingY),lineTo(this.width-this.padding,this.height-this.padding),stroke(),globalAlpha=.2,fillStyle=this.colors.accent,fill(),globalAlpha=1,closePath(),beginPath(),fillStyle=this.colors.accent,strokeStyle=this.colors.border,lineWidth=this.lineWidth,arc(drawingX,drawingY,this.nodeSize,0,2*Math.PI,!0),fill(),closePath(),globalAlpha=.1,fillRect(0,0,this.val.index*this.width,this.height),globalAlpha=1}this.drawLabel()},envelope.prototype.scaleNode=function(){var t=this.val.x-this.nodeSize-this.lineWidth,i=this.val.y-this.nodeSize-this.lineWidth,e=math.clip(t/this.actualWid,0,1),s=math.clip(i/this.actualHgt,0,1);this.val.x=math.prune(e,3),this.val.y=math.prune(s,3)},envelope.prototype.click=function(){this.val.x=this.clickPos.x,this.val.y=this.clickPos.y,this.scaleNode(),this.nxTransmit(this.val),this.draw()},envelope.prototype.move=function(){this.clicked&&(this.val.x=this.clickPos.x,this.val.y=this.clickPos.y,this.scaleNode(),this.nxTransmit(this.val),this.draw())},envelope.prototype.release=function(){this.val.x=this.clickPos.x,this.val.y=this.clickPos.y,this.scaleNode(),this.draw()},envelope.prototype.advance=function(){if(this.active){if(this.val.index+=33/this.width/this.duration,this.val.index<this.val.x){var t=this.val.index/this.val.x*(1-this.val.y);this.val.amp=Math.abs(t-1)}else{var t=(1-this.val.index)/(1-this.val.x)*(1-this.val.y);this.val.amp=Math.abs(t-1)}this.nxTransmit(this.val),this.draw(),this.val.index>=1&&this.stop()}},envelope.prototype.start=function(){this.active=!0,this.val.index=0},envelope.prototype.stop=function(){this.active=!1,this.val.index=0,this.draw()},envelope.prototype.continue=function(){}},{"../core/widget":3,"../utils/math":6,util:40}],14:[function(t,i){i.exports={banner:t("./banner"),button:t("./button"),colors:t("./colors"),comment:t("./comment"),dial:t("./dial"),envelope:t("./envelope"),joints:t("./joints"),keyboard:t("./keyboard"),matrix:t("./matrix"),message:t("./message"),metro:t("./metro"),mouse:t("./mouse"),multislider:t("./multislider"),multitouch:t("./multitouch"),number:t("./number"),panel:t("./panel"),pixels:t("./pixels"),position:t("./position"),range:t("./range"),select:t("./select"),slider:t("./slider"),string:t("./string"),tilt:t("./tilt"),toggle:t("./toggle"),typewriter:t("./typewriter"),vinyl:t("./vinyl"),wheel:t("./wheel")}},{"./banner":8,"./button":9,"./colors":10,"./comment":11,"./dial":12,"./envelope":13,"./joints":15,"./keyboard":16,"./matrix":17,"./message":18,"./metro":19,"./mouse":20,"./multislider":21,"./multitouch":22,"./number":23,"./panel":24,"./pixels":25,"./position":26,"./range":27,"./select":28,"./slider":29,"./string":30,"./tilt":31,"./toggle":32,"./typewriter":33,"./vinyl":34,"./wheel":35}],15:[function(require,module,exports){var math=require("../utils/math"),util=require("util"),widget=require("../core/widget"),joints=module.exports=function(t){this.defaultSize={width:150,height:150},widget.call(this,t),this.nodeSize=this.width/14,this.values=[0,0],this.val={x:0,y:0,node1:0},this.nodePos=[50,50],this.joints=[{x:this.width/1.2,y:this.height/1.2},{x:this.width/2,y:this.height/1.3},{x:this.width/4.2,y:this.height/1.1},{x:this.width/1.4,y:this.height/2.2},{x:this.width/2.1,y:this.height/1.8},{x:this.width/5,y:this.height/2.4},{x:this.width/2.8,y:this.height/6},{x:this.width/6,y:this.height/3.7}],this.threshold=this.width/3};util.inherits(joints,widget),joints.prototype.init=function(){this.draw()},joints.prototype.draw=function(){with(this.erase(),this.makeRoundedBG(),this.drawingX=this.val.x*this.width,this.drawingY=this.val.y*this.height,this.context){strokeStyle=this.colors.border,fillStyle=this.colors.fill,lineWidth=this.lineWidth,stroke(),fill(),null!=this.val.x?this.drawNode():(fillStyle=this.colors.border,font="14px courier",fillText(this.default_text,10,20)),fillStyle=this.colors.accent,strokeStyle=this.colors.border,lineWidth=this.lineWidth;
for(var i in this.joints){beginPath(),arc(this.joints[i].x,this.joints[i].y,this.nodeSize/2,0,2*Math.PI,!0),fill(),closePath();var cnctX=Math.abs(this.joints[i].x-this.drawingX),cnctY=Math.abs(this.joints[i].y-this.drawingY),strength=cnctX+cnctY;if(strength<this.threshold){beginPath(),moveTo(this.joints[i].x,this.joints[i].y),lineTo(this.drawingX,this.drawingY),strokeStyle=this.colors.accent,lineWidth=math.scale(strength,0,this.threshold,this.nodeSize/2,5),stroke(),closePath();var scaledstrength=math.scale(strength,0,this.threshold,1,0);this.val["node"+i]=scaledstrength}}}this.drawLabel()},joints.prototype.drawNode=function(){with(this.drawingX<this.bgLeft+this.nodeSize?this.drawingX=this.bgLeft+this.nodeSize:this.drawingX>this.bgRight-this.nodeSize&&(this.drawingX=this.bgRight-this.nodeSize),this.drawingY<this.bgTop+this.nodeSize?this.drawingY=this.bgTop+this.nodeSize:this.drawingY>this.bgBottom-this.nodeSize&&(this.drawingY=this.bgBottom-this.nodeSize),this.context)globalAlpha=1,beginPath(),fillStyle=this.colors.accent,strokeStyle=this.colors.border,lineWidth=this.lineWidth,arc(this.drawingX,this.drawingY,this.nodeSize,0,2*Math.PI,!0),fill(),closePath()},joints.prototype.scaleNode=function(){return this.values=[math.prune(this.val.x/this.width,3),math.prune(this.val.y/this.height,3)],this.values},joints.prototype.click=function(){this.val=new Object,this.val.x=this.clickPos.x/this.width,this.val.y=this.clickPos.y/this.height,this.draw(),this.nxTransmit(this.val),this.connections=new Array},joints.prototype.move=function(){if(this.val=new Object,this.clicked){this.val.x=this.clickPos.x/this.width,this.val.y=this.clickPos.y/this.height,this.draw();{({"this.clickPos.x":this.clickPos.x,"this.clickPos.y":this.clickPos.y,"this.val.x":this.val.x,"this.val.y":this.val.y,"this.offset":this.offset})}this.nxTransmit(this.val),this.connections=new Array}},joints.prototype.release=function(){},joints.prototype.touch=function(){this.val.x=this.clickPos.x/this.width,this.val.y=this.clickPos.y/this.height,this.draw(),this.nxTransmit(this.val),this.connections=new Array},joints.prototype.touchMove=function(){this.clicked&&(this.val.x=this.clickPos.x/this.width,this.val.y=this.clickPos.y/this.height,this.draw(),this.nxTransmit(this.val),this.connections=new Array)},joints.prototype.touchRelease=function(){},joints.prototype.animate=function(t){switch(t){case"bounce":nx.aniItems.push(this.aniBounce);break;case"none":nx.aniItems.splice(nx.aniItems.indexOf(this.aniBounce))}},joints.prototype.aniBounce=function(){!this.clicked&&this.val.x&&(this.val.x+=this.deltaMove.x/2,this.val.y+=this.deltaMove.y/2,this.deltaMove.x=math.bounce(this.val.x,this.bgLeft+this.nodeSize,this.width-this.bgLeft-this.nodeSize,this.deltaMove.x),this.deltaMove.y=math.bounce(this.val.y,this.bgTop+this.nodeSize,this.height-this.bgTop-this.nodeSize,this.deltaMove.y),this.draw(),this.nxTransmit(this.scaleNode()))}},{"../core/widget":3,"../utils/math":6,util:40}],16:[function(require,module,exports){var util=require("util"),widget=require("../core/widget"),keyboard=module.exports=function(t){this.defaultSize={width:300,height:75},widget.call(this,t),this.octaves=2,this.keywidth=this.canvas.width/(12*this.octaves)/1.75,this.w_height=this.height,this.b_height=4*this.w_height/7,this.w_width=3*this.keywidth,this.b_width=2*this.keywidth,this.black_dis=[0,0,0,0,0,0,0,0,1,3,4,5],this.white_dis=[[0,2],[4,5],[7,9],[9,11],[13,14],[16,17],[19,21]],this.order=[0,2,4,5,7,9,11,1,3,6,8,10],this.keys=new Array,this.lineWidth=1,this.note_new,this.note_old,this.val={on:0,note:0,midi:"0 0"},this.init()};util.inherits(keyboard,widget),keyboard.prototype.init=function(){this.keywidth=this.canvas.width/(12*this.octaves)/1.75,this.w_height=this.height,this.b_height=4*this.w_height/7,this.w_width=3*this.keywidth,this.b_width=2*this.keywidth;var t,i,e;for(i=0;i<this.octaves;i++)for(e=0;12>e;e++)if(t=this.order[e]+12*i,7>e){var s=this.w_width*(e+7*i),h=e+1,o=this.w_width*(h+7*i);this.keys.push([0,e,0,s,o,t])}else{var n=this.black_dis[e],l=this.b_width*(1+n+n/2)+7*i*this.w_width,r=n+1,a=this.b_width*(1+r+n/2)+7*i*this.w_width;this.keys.push([0,n,1,l,a,t])}return this.draw(),1},keyboard.prototype.draw=function(){var m,i,d,xx,dis;for(m=0;m<this.octaves;m++)for(i=0;12>i;i++)if(d=12*m+i,0==this.keys[d][2]){var k=this.keys[d][1],x=k*this.w_width+m*this.w_width*7;with(this.context)lineWidth=this.lineWidth,0==this.keys[d][0]?(fillStyle=this.colors.fill,fillRect(x,0,this.w_width,this.w_height),strokeStyle=this.colors.border,strokeRect(x,0,this.w_width,this.w_height)):(fillStyle=this.colors.accent,fillRect(x,0,this.w_width,this.w_height))}else with(dis=this.keys[d][1],xx=dis*(this.b_width+this.b_width/2)+this.b_width+m*this.w_width*7,this.context)lineWidth=this.lineWidth,fillStyle=0==this.keys[d][0]?this.colors.black:this.colors.accent,fillRect(xx,0,this.b_width,this.b_height);with(this.context)strokeStyle=this.colors.border,lineWidth=3,strokeRect(0,0,this.width,this.height);this.drawLabel()},keyboard.prototype.change_cell=function(t,i){null!=t&&this.keys[t].splice(0,1,i)},keyboard.prototype.whichKey_pressed=function(t,i){var e,s,h,o=0;if(i<this.b_height)for(e=0;e<this.octaves;e++){for(s=7;12>s;s++){var n=12*e+s;if(t>this.keys[n][3]&&t<=this.keys[n][4]){this.note_new=n,o=1;break}}if(0==o)for(h=0;7>h;h++){var l=(this.white_dis[h][0]+21*e)*this.keywidth,r=(this.white_dis[h][1]+21*e)*this.keywidth;if(t>l&&r>=t){var a=12*e+h;this.note_new=a;break}}}else if(i>this.b_height&&i<this.w_height)for(e=0;e<this.octaves;e++)for(s=0;7>s;s++){var n=12*e+s;t>this.keys[n][3]&&t<this.keys[n][4]&&(this.note_new=n)}else this.note_new=null},keyboard.prototype.click=function(){this.whichKey_pressed(this.clickPos.x,this.clickPos.y),this.change_cell(this.note_new,1),this.note_old=this.note_new,midi_note=this.keys[this.note_new][5],this.val={on:1,note:midi_note,midi:midi_note+" 1"},this.nxTransmit(this.val),this.draw()},keyboard.prototype.move=function(){this.clicked&&(this.whichKey_pressed(this.clickPos.x,this.clickPos.y),this.note_old!=this.note_new&&(this.change_cell(this.note_old,0),this.change_cell(this.note_new,1),midi_note=this.keys[this.note_new][5],this.val={on:1,note:midi_note,midi:midi_note+" 1"},this.nxTransmit(this.val),midi_note=this.keys[this.note_old][5],this.val={on:0,note:midi_note,midi:midi_note+" 0"},this.nxTransmit(this.val),this.draw())),this.note_old=this.note_new},keyboard.prototype.release=function(){for(j=0;j<this.octaves;j++)for(i=0;12>i;i++){var t=12*j+i;this.change_cell(t,0)}midi_note=this.keys[this.note_new][5],this.val={on:0,note:midi_note,midi:midi_note+" 0"},this.nxTransmit(this.val),this.draw()}},{"../core/widget":3,util:40}],17:[function(require,module,exports){var math=require("../utils/math"),drawing=require("../utils/drawing"),util=require("util"),widget=require("../core/widget"),matrix=module.exports=function(t){this.defaultSize={width:100,height:100},widget.call(this,t),this.row=3,this.col=3,this.off=3,this.cellHgt,this.cellWid,this.pos,this.matrix,this.val={row:0,col:0,value:0};this.place=null,this.starttime,this.thisframe=0,this.lastframe=0,this.bpm=120,this.init()};util.inherits(matrix,widget),matrix.prototype.init=function(){this.matrix=new Array(this.row);for(var t=0;t<this.matrix.length;t++)this.matrix[t]=new Array(this.col);for(var t=0;t<this.row;t++)for(j=0;j<this.col;j++)this.matrix[t][j]=0;this.draw()},matrix.prototype.draw=function(){with(this.cellWid=(this.canvas.width-2*this.off)/this.col,this.cellHgt=(this.canvas.height-2*this.off)/this.row,this.makeRoundedBG(),this.context)strokeStyle=this.colors.border,fillStyle=this.colors.fill,lineWidth=this.lineWidth;for(var i=0;i<this.row;i++)for(var j=0;j<this.col;j++){var st_x=j*this.cellWid+this.lineWidth,st_y=i*this.cellHgt+this.lineWidth,boxwid=(this.cellWid*this.matrix[i][j],this.cellHgt*this.matrix[i][j],(j+1)*this.cellWid+this.off/2,(i+1)*this.cellHgt+this.off+this.off/2,this.cellWid-this.lineWidth),boxhgt=this.cellHgt-this.lineWidth;with(drawing.makeRoundRect(this.context,st_x,st_y,boxwid,boxhgt),this.context){if(strokeStyle=this.colors.border,fillStyle=this.colors.fill,stroke(),fill(),this.matrix[i][j]>0){var level=Math.abs(this.matrix[i][j]-1),x1=st_x,y1=st_y+this.cellHgt*level-5*level,x2=boxwid+x1,y2=boxhgt*this.matrix[i][j]+y1,depth=6;beginPath(),this.matrix[i][j]>.95?(moveTo(x1+depth,y1),lineTo(x2-depth,y1),quadraticCurveTo(x2,y1,x2,y1+depth)):(moveTo(x1,y1),lineTo(x2,y1)),lineTo(x2,y2-depth),quadraticCurveTo(x2,y2,x2-depth,y2),lineTo(x1+depth,y2),quadraticCurveTo(x1,y2,x1,y2-depth),this.matrix[i][j]>.95?(lineTo(x1,y1+depth),quadraticCurveTo(x1,y1,x1+depth,y1)):lineTo(x1,y1),closePath(),fillStyle=this.colors.accent,fill()}drawing.makeRoundRect(this.context,st_x,st_y,boxwid,boxhgt),null!=this.place&&this.place==i*this.col+j&&(globalAlpha=.4,fillStyle=this.colors.accent,fill(),globalAlpha=1)}}this.drawLabel()},matrix.prototype.click=function(){this.cur={col:~~(this.clickPos.x/this.cellWid),row:~~(this.clickPos.y/this.cellHgt)},this.cur.value=this.clickPos.y-this.cellHgt*this.cur.row,this.cur.value=this.cur.value/this.cellHgt,this.cur.value=math.invert(this.cur.value),this.cur.value<=.5&&(this.cur.value=0),this.matrix[this.cur.row][this.cur.col]=this.cur.value,this.nxTransmit(this.cur),this.draw()},matrix.prototype.move=function(t){this.clicked&&this.clickPos.y>=0&&this.click(t)},matrix.prototype.sequence=function(t){t&&(this.bpm=t),requestAnimationFrame(this.seqStep)},matrix.prototype.seqStep=function(){var t=(new Date).getTime(),i=t-nx.starttime;this.thisframe=~~(i/(6e4/this.bpm)),this.thisframe!=this.lastframe&&(null==this.place&&(this.place=0),this.draw(),this.cur={row:~~(this.place/this.col),col:this.place%this.row},this.cur.value=this.matrix[this.cur.row][this.cur.col],this.nxTransmit(this.cur),this.place++,this.place>=this.row*this.col&&(this.place=0)),this.lastframe=this.thisframe,requestAnimationFrame(this.seqStep)}},{"../core/widget":3,"../utils/drawing":5,"../utils/math":6,util:40}],18:[function(require,module,exports){var util=require("util"),widget=require("../core/widget"),message=module.exports=function(t){this.defaultSize={width:100,height:30},widget.call(this,t),this.val={message:"send a message"},this.size=12};util.inherits(message,widget),message.prototype.init=function(){this.canvas.getAttribute("label")&&(this.val.message=this.canvas.getAttribute("label")),this.draw()},message.prototype.draw=function(){with(this.erase(),this.makeRoundedBG(),this.context){strokeStyle=this.colors.border,fillStyle=this.clicked?this.colors.accent:this.colors.fill,lineWidth=this.lineWidth,stroke(),fill(),globalAlpha=.2;var grd=this.context.createLinearGradient(0,0,0,this.height);grd.addColorStop(0,this.colors.fill),grd.addColorStop(1,this.colors.black),fillStyle=grd,fill(),globalAlpha=1,fillStyle=this.colors.black,textAlign="left",font=this.size+"px courier"}this.wrapText(this.val.message,5,1+this.size,this.width-6,this.size)},message.prototype.click=function(){this.draw(),this.nxTransmit(this.val)},message.prototype.release=function(){this.draw()}},{"../core/widget":3,util:40}],19:[function(require,module,exports){var math=require("../utils/math"),util=require("util"),widget=require("../core/widget"),metro=module.exports=function(t){this.defaultSize={width:100,height:100},widget.call(this,t),this.val={beat:0},this.x=0,this.y=0,this.nodeSize=10,this.sides=8,this.size=20,this.Xcenter=25,this.Ycenter=25,this.cornerSize=10,this.speed=.02,this.corners=new Array,this.rotation=0,this.init()};util.inherits(metro,widget),metro.prototype.init=function(){this.corners=new Array,this.nodeSize=Math.min(this.width,this.height)/20,this.cornerSize=this.nodeSize,this.size=(Math.min(this.width,this.height)-4*this.nodeSize)/2,this.Xcenter=this.width/2,this.Ycenter=this.height/2,this.actualWid=this.width-2*this.lineWidth-2*this.nodeSize,this.actualHgt=this.height-2*this.lineWidth-2*this.nodeSize;for(var t=0;t<this.sides;t+=1)this.corners[t]={x:this.Xcenter+this.size*Math.cos(2*(t+1)*Math.PI/this.sides),y:this.Ycenter+this.size*Math.sin(2*(t+1)*Math.PI/this.sides),highlight:!1};nx.aniItems.push(this.advance.bind(this)),this.draw()},metro.prototype.draw=function(){with(this.context.globalAlpha=.4,this.makeRoundedBG(),this.context){strokeStyle=this.colors.border,fillStyle=this.colors.fill,lineWidth=this.lineWidth,fill(),this.rotationpoint=Math.floor(this.rotation)%this.sides,this.rotationpoint2=(this.rotationpoint+1)%this.sides,this.interp=this.rotation%this.sides-this.rotationpoint,this.interpx=(this.corners[this.rotationpoint2].x-this.corners[this.rotationpoint].x)*this.interp,this.interpy=(this.corners[this.rotationpoint2].y-this.corners[this.rotationpoint].y)*this.interp,this.x=this.corners[this.rotationpoint].x+this.interpx,this.y=this.corners[this.rotationpoint].y+this.interpy,beginPath(),moveTo(this.corners[this.corners.length-1].x,this.corners[this.corners.length-1].y);for(var i=0;i<this.corners.length;i+=1)lineTo(this.corners[i].x,this.corners[i].y);fillStyle=this.colors.accent,globalAlpha=.05,fill(),closePath(),globalAlpha=1;for(var i=0;i<this.corners.length;i+=1)fillStyle=this.colors.accent,globalAlpha=i*(.75/this.sides)+.25,fillRect(this.corners[i].x-this.cornerSize,this.corners[i].y-this.cornerSize,2*this.cornerSize,2*this.cornerSize),this.interp<.7&&this.rotationpoint==i&&(globalAlpha=1-this.interp,fillStyle=this.colors.white,fillRect(this.corners[i].x-this.cornerSize,this.corners[i].y-this.cornerSize,2*this.cornerSize,2*this.cornerSize));globalAlpha=1,beginPath(),fillStyle=this.colors.accent,strokeStyle=this.colors.border,lineWidth=this.lineWidth,arc(this.x,this.y,this.nodeSize,0,2*Math.PI,!0),fill(),closePath()}this.drawLabel()},metro.prototype.scaleNode=function(){var t=this.val.x-this.nodeSize-this.lineWidth,i=this.val.y-this.nodeSize-this.lineWidth,e=math.clip(t/this.actualWid,0,1),s=math.clip(i/this.actualHgt,0,1);0/0===e&&(e=0),this.val.x=math.prune(e,3),this.val.y=math.prune(s,3)},metro.prototype.click=function(){},metro.prototype.move=function(){this.clicked&&(this.speed-=this.deltaMove.y/1e3)},metro.prototype.release=function(){},metro.prototype.advance=function(){this.rotation+=this.speed,this.rotation<=0&&(this.rotation=1e4*this.sides),this.nxTransmit(this.val),this.draw()}},{"../core/widget":3,"../utils/math":6,util:40}],20:[function(require,module,exports){var util=require("util"),widget=require("../core/widget"),mouse=module.exports=function(t){this.defaultSize={width:98,height:100},widget.call(this,t),this.val={x:0,y:0,deltax:0,deltay:0},this.inside=new Object,this.init()};util.inherits(mouse,widget),mouse.prototype.init=function(){this.mousing=window.addEventListener("mousemove",this.preMove,!1),this.mousing=window.addEventListener("touchmove",this.preTouchMove,!1),this.inside.height=this.height-this.lineWidth,this.inside.width=this.width-this.lineWidth,this.inside.left=this.lineWidth,this.inside.top=this.lineWidth,this.inside.quarterwid=this.inside.width/4},mouse.prototype.draw=function(){with(this.erase(),this.makeRoundedBG(),this.context){strokeStyle=this.colors.border,fillStyle=this.colors.fill,lineWidth=this.lineWidth,stroke(),fill();var scaledx=-this.val.x*this.height,scaledy=-this.val.y*this.height,scaleddx=-this.val.deltax*this.height-this.height/2,scaleddy=-this.val.deltay*this.height-this.height/2;fillStyle=this.colors.accent,fillRect(this.inside.left,this.inside.height,this.inside.quarterwid,scaledx),fillRect(this.inside.quarterwid,this.inside.height,this.inside.quarterwid,scaledy),fillRect(2*this.inside.quarterwid,this.inside.height,this.inside.quarterwid,scaleddx),fillRect(3*this.inside.quarterwid,this.inside.height,this.inside.quarterwid,scaleddy),globalAlpha=.5,fillStyle=this.colors.white,textAlign="center",font=this.width/7+"px gill sans",fillText("x",0*this.inside.quarterwid+this.inside.quarterwid/2,this.height-7),fillText("y",1*this.inside.quarterwid+this.inside.quarterwid/2,this.height-7),fillText("dx",2*this.inside.quarterwid+this.inside.quarterwid/2,this.height-7),fillText("dy",3*this.inside.quarterwid+this.inside.quarterwid/2,this.height-7),globalAlpha=1}this.drawLabel()},mouse.prototype.move=function(t){this.val={deltax:(t.clientX-document.body.scrollLeft)/window.innerWidth-this.val.x,deltay:(t.clientY-document.body.scrollTop)/window.innerHeight-this.val.y,x:(t.clientX-document.body.scrollLeft)/window.innerWidth,y:(t.clientY-document.body.scrollTop)/window.innerHeight},this.draw(),this.nxTransmit(this.val)}},{"../core/widget":3,util:40}],21:[function(require,module,exports){var math=require("../utils/math"),util=require("util"),widget=require("../core/widget"),multislider=module.exports=function(t){this.defaultSize={width:100,height:75},widget.call(this,t),this.sliders=15,this.val=new Object;for(var i=0;i<this.sliders;i++)this.val[i]=.7;this.sliderClicked=0,this.oldSliderToMove,this.init()};util.inherits(multislider,widget),multislider.prototype.init=function(){this.realSpace={x:this.width-2*this.padding,y:this.height-2*this.padding},this.sliderWidth=this.realSpace.x/this.sliders},multislider.prototype.draw=function(){with(this.erase(),this.makeRoundedBG(),this.context)for(strokeStyle=this.colors.border,fillStyle=this.colors.fill,lineWidth=this.lineWidth,stroke(),fill(),strokeStyle=this.colors.accent,fillStyle=this.colors.accent,lineWidth=5,i=0;i<this.sliders;i++)beginPath(),moveTo(this.padding+i*this.sliderWidth,this.height-this.val[i]*this.height),lineTo(this.padding+i*this.sliderWidth+this.sliderWidth,this.height-this.val[i]*this.height),stroke(),lineTo(this.padding+i*this.sliderWidth+this.sliderWidth,this.height-this.padding),lineTo(this.padding+i*this.sliderWidth,this.height-this.padding),globalAlpha=.3-i%3*.1,fill(),closePath(),globalAlpha=1;this.drawLabel()},multislider.prototype.click=function(){this.oldSliderToMove=!1,this.move()},multislider.prototype.move=function(){if(this.clicked){if(this.clickPos.touches.length>1)for(var t=0;t<this.clickPos.touches.length;t++){var i=Math.floor(this.clickPos.touches[t].x/this.sliderWidth);i=math.clip(i,0,this.sliders-1),this.val[i]=math.clip(math.invert(this.clickPos.touches[t].y/this.height),0,1)}else{var i=Math.floor(this.clickPos.x/this.sliderWidth);i=math.clip(i,0,this.sliders-1),this.val[i]=math.clip(math.invert(this.clickPos.y/this.height),0,1)}this.draw()}var e=new Object;e[i]=this.val[i],e.list=new String;for(var s in this.val)e.list+=this.val[s]+" ";this.nxTransmit(e)},multislider.prototype.setNumberOfSliders=function(t){this.sliders=t,this.values=new Array;for(var i=0;i<this.sliders;i++)this.values.push(.5);this.sliderWidth=this.realSpace.x/this.sliders,this.init()}},{"../core/widget":3,"../utils/math":6,util:40}],22:[function(require,module,exports){var math=require("../utils/math"),drawing=require("../utils/drawing"),util=require("util"),widget=require("../core/widget"),multitouch=module.exports=function(t){console.log("test"),this.defaultSize={width:200,height:200},widget.call(this,t),this.nodeSize=this.width/10,this.val={touch1:{x:0,y:0}},this.nodes=new Array,this.default_text="multitouch",this.rainbow=["#00f","#04f","#08F","0AF","0FF"],this.mode="normal",this.rows=10,this.cols=10,this.matrixLabels=!1,this.init()};util.inherits(multitouch,widget),multitouch.prototype.init=function(){console.log("test"),this.nodeSize=this.width/10,this.draw()},multitouch.prototype.draw=function(){with(this.erase(),this.makeRoundedBG(),this.context){strokeStyle=this.colors.border,fillStyle=this.colors.fill,lineWidth=this.lineWidth,stroke(),fill();var count=0;if("matrix"==this.mode)for(var j=0;j<this.rows;j++)for(var i=0;i<this.cols;i++)with(this.context){beginPath(),fillStyle=this.colors.accent,strokeStyle=this.colors.border,lineWidth=1;var circx=i*this.width/this.cols+this.width/this.cols/2,circy=j*this.height/this.rows+this.height/this.rows/2;arc(circx,circy,this.height/this.rows/2,0,2*Math.PI,!0),stroke(),fillStyle=this.colors.border,textAlign="center",textBaseline="middle",this.matrixLabels&&(fillText(this.matrixLabels[count%this.matrixLabels.length],circx,circy),count++);var thisarea={xpos:i*this.width/this.cols,ypos:j*this.height/this.rows,wid:this.width/this.cols,hgt:this.height/this.rows};if(this.clickPos.touches.length>=1)for(var k=0;k<this.clickPos.touches.length;k++)drawing.isInside(this.clickPos.touches[k],thisarea)&&(globalAlpha=.5,fillStyle=this.colors.accent,fill(),globalAlpha=.3,fillStyle=this.rainbow[k],fill(),globalAlpha=1);closePath()}else if(this.clickPos.touches.length>=1)for(var i=0;i<this.clickPos.touches.length;i++)with(this.context)globalAlpha=.5,beginPath(),fillStyle=this.colors.accent,strokeStyle=this.colors.border,lineWidth=this.lineWidth,arc(this.clickPos.touches[i].x,this.clickPos.touches[i].y,this.nodeSize,0,2*Math.PI,!0),fill(),closePath(),globalAlpha=.3,beginPath(),fillStyle=this.rainbow[i],strokeStyle=this.colors.border,lineWidth=this.lineWidth,arc(this.clickPos.touches[i].x,this.clickPos.touches[i].y,this.nodeSize,0,2*Math.PI,!0),fill(),closePath(),globalAlpha=1;else fillStyle=this.colors.border,font="14px courier",textAlign="center",fillText(this.default_text,this.width/2,this.height/2)}this.drawLabel()},multitouch.prototype.click=function(){this.draw(),this.sendit()},multitouch.prototype.move=function(){this.clicked&&(this.draw(),this.sendit())},multitouch.prototype.release=function(){if(!this.clicked){this.clickPos.touches=new Array;for(var t=0;5>t;t++)this.val["touch"+t]={x:0,y:0};this.nxTransmit(this.val)}this.draw(),this.sendit()},multitouch.prototype.sendit=function(){this.val=new Object;for(var t=0;t<this.clickPos.touches.length;t++)this.val["touch"+t]={x:this.clickPos.touches[t].x/this.canvas.width,y:math.invert(this.clickPos.touches[t].y/this.canvas.height)};this.nxTransmit(this.val)}},{"../core/widget":3,"../utils/drawing":5,"../utils/math":6,util:40}],23:[function(require,module,exports){var math=require("../utils/math"),util=require("util"),widget=require("../core/widget"),number=module.exports=function(t){this.defaultSize={width:50,height:25},widget.call(this,t),this.val={value:0},this.init()};util.inherits(number,widget),number.prototype.init=function(){this.draw()},number.prototype.draw=function(){with(this.erase(),this.makeRoundedBG(),this.context)strokeStyle=this.colors.border,fillStyle=this.colors.fill,lineWidth=this.lineWidth,stroke(),fill(),fillStyle=this.colors.black,textAlign="left",font=.6*this.height+"px courier",textBaseline="middle",fillText(this.val.value,10,this.height/2-1)},number.prototype.move=function(){this.clicked&&(this.val.value+=this.deltaMove.y*-.1,this.val.value=math.prune(this.val.value,1),this.draw(),this.nxTransmit(this.val))}},{"../core/widget":3,"../utils/math":6,util:40}],24:[function(require,module,exports){var util=require("util"),widget=require("../core/widget"),panel=module.exports=function(t){this.defaultSize={width:100,height:100},widget.call(this,t)};util.inherits(panel,widget),panel.prototype.init=function(){this.draw()},panel.prototype.draw=function(){with(this.erase(),this.makeRoundedBG(),this.context)strokeStyle=this.colors.border,fillStyle=this.colors.fill,lineWidth=this.lineWidth,stroke(),fill()}},{"../core/widget":3,util:40}],25:[function(require,module,exports){var math=require("../utils/math"),util=require("util"),widget=require("../core/widget"),pixels=module.exports=function(t){this.defaultSize={width:150,height:150},widget.call(this,t),this.dim={x:10,y:10},this.mode="write",this.init()};util.inherits(pixels,widget),pixels.prototype.init=function(){this.dim={x:~~(this.width/20),y:~~(this.height/20)},this.px={wid:(this.width-2*this.padding)/this.dim.x,hgt:(this.height-2*this.padding)/this.dim.y},this.screen=new Array;for(var t=0;t<this.dim.y;t++){this.screen[t]=new Array;for(var i=0;i<this.dim.x;i++)this.screen[t][i]=[0,0,0]}this.draw()},pixels.prototype.draw=function(){with(this.erase(),this.makeRoundedBG(),this.context)fillStyle=this.colors.fill,strokeStyle=this.colors.border,fill(),stroke();this.drawLabel()},pixels.prototype.reset=function(){this.draw()},pixels.prototype.click=function(e){var pixX=~~(this.clickPos.x/this.px.wid),scaledX=pixX*this.px.wid+this.padding,pixY=~~(this.clickPos.y/this.px.hgt),scaledY=pixY*this.px.hgt+this.padding;if(this.lastpx={x:scaledX,y:scaledY},"write"==this.mode){with(this.context)globalAlpha=.3,fillStyle=this.colors.accent,fillRect(scaledX,scaledY,2*this.px.wid,2*this.px.hgt),globalAlpha=1;var imgData=this.context.getImageData(this.clickPos.x,this.clickPos.y,1,1);this.screen[pixY][pixX]=[imgData.data[0],imgData.data[1],imgData.data[2]];var imgData=this.context.getImageData(this.clickPos.x+this.px.wid,this.clickPos.y,1,1);this.screen[pixY][pixX+1]=[imgData.data[0],imgData.data[1],imgData.data[2]];var imgData=this.context.getImageData(this.clickPos.x,this.clickPos.y+this.px.hgt,1,1);this.screen[pixY+1][pixX]=[imgData.data[0],imgData.data[1],imgData.data[2]];var imgData=this.context.getImageData(this.clickPos.x+this.px.wid,this.clickPos.y+this.px.hgt,1,1);this.screen[pixY+1][pixX+1]=[imgData.data[0],imgData.data[1],imgData.data[2]]}this.send(pixX,pixY)},pixels.prototype.move=function(){var pixX=~~(this.clickPos.x/this.px.wid);pixX=math.clip(pixX,0,this.dim.x-2);var scaledX=pixX*this.px.wid+this.padding,pixY=~~(this.clickPos.y/this.px.hgt);pixY=math.clip(pixY,0,this.dim.y-2);var scaledY=pixY*this.px.hgt+this.padding;if(scaledX!=this.lastpx.x||scaledY!=this.lastpx.y){if(this.lastpx={x:scaledX,y:scaledY},"write"==this.mode){with(this.context)globalAlpha=.1,fillStyle=this.colors.accent,fillRect(scaledX,scaledY,2*this.px.wid,2*this.px.hgt),globalAlpha=1;var imgData=this.context.getImageData(this.clickPos.x,this.clickPos.y,1,1);this.screen[pixY][pixX]=[imgData.data[0],imgData.data[1],imgData.data[2]];var imgData=this.context.getImageData(this.clickPos.x+this.px.wid,this.clickPos.y,1,1);this.screen[pixY][pixX+1]=[imgData.data[0],imgData.data[1],imgData.data[2]];var imgData=this.context.getImageData(this.clickPos.x,this.clickPos.y+this.px.hgt,1,1);this.screen[pixY+1][pixX]=[imgData.data[0],imgData.data[1],imgData.data[2]];var imgData=this.context.getImageData(this.clickPos.x+this.px.wid,this.clickPos.y+this.px.hgt,1,1);this.screen[pixY+1][pixX+1]=[imgData.data[0],imgData.data[1],imgData.data[2]]}this.send(pixX,pixY)}},pixels.prototype.release=function(){},pixels.prototype.touch=function(t){this.click(t)},pixels.prototype.touchMove=function(t){this.move(t)},pixels.prototype.touchRelease=function(t){this.release(t)},pixels.prototype.send=function(t,i){if("write"==this.mode){for(var e="",s=0;s<this.screen.length;s++){var h=this.screen[s].join();e+=h.replace(/\,/g," "),e+=" "}var o={matrix:e};this.nxTransmit(o)}else if("read"==this.mode){var o={r:this.screen[i][t][0],g:this.screen[i][t][1],b:this.screen[i][t][2]};this.nxTransmit(o)}}},{"../core/widget":3,"../utils/math":6,util:40}],26:[function(require,module,exports){var math=require("../utils/math"),util=require("util"),widget=require("../core/widget"),position=module.exports=function(t){this.defaultSize={width:150,height:100},widget.call(this,t),this.nodeSize=15,this.val={x:this.width/2,y:this.height/2},this.default_text="touch to control",this.init()};util.inherits(position,widget),position.prototype.init=function(){this.nodeSize=this.width/15,this.actualWid=this.width-2*this.lineWidth-2*this.nodeSize,this.actualHgt=this.height-2*this.lineWidth-2*this.nodeSize,this.draw()},position.prototype.draw=function(){with(this.erase(),this.makeRoundedBG(),this.context){strokeStyle=this.colors.border,fillStyle=this.colors.fill,lineWidth=this.lineWidth,stroke(),fill();var drawingX=this.val.x*this.actualWid+this.nodeSize+this.lineWidth,drawingY=this.val.y*this.actualHgt+this.nodeSize+this.lineWidth;with(drawingX<this.bgLeft+this.nodeSize?drawingX=this.bgLeft+this.nodeSize:drawingX>this.bgRight-this.nodeSize&&(drawingX=this.bgRight-this.nodeSize),drawingY<this.bgTop+this.nodeSize?drawingY=this.bgTop+this.nodeSize:drawingY>this.bgBottom-this.nodeSize&&(drawingY=this.bgBottom-this.nodeSize),this.context)globalAlpha=.2,beginPath(),strokeStyle=this.colors.accent,lineWidth=2,moveTo(drawingX,0+this.padding),lineTo(drawingX,this.height-this.padding),moveTo(0+this.padding,drawingY),lineTo(this.width-this.padding,drawingY),stroke(),closePath(),globalAlpha=1,beginPath(),fillStyle=this.colors.accent,strokeStyle=this.colors.border,lineWidth=this.lineWidth,arc(drawingX,drawingY,this.nodeSize,0,2*Math.PI,!0),fill(),closePath()}this.drawLabel()},position.prototype.scaleNode=function(){var t=this.val.x-this.nodeSize-this.lineWidth,i=this.val.y-this.nodeSize-this.lineWidth,e=math.clip(t/this.actualWid,0,1),s=math.clip(i/this.actualHgt,0,1);this.val.x=math.prune(e,3),this.val.y=math.prune(s,3)},position.prototype.click=function(){this.val.x=this.clickPos.x,this.val.y=this.clickPos.y,this.scaleNode(),this.val.state="click",this.nxTransmit(this.val),this.draw()},position.prototype.move=function(){this.clicked&&(this.val.x=this.clickPos.x,this.val.y=this.clickPos.y,this.scaleNode(),this.val.state="move",this.nxTransmit(this.val),this.draw())},position.prototype.release=function(){this.val.x=this.clickPos.x,this.val.y=this.clickPos.y,this.scaleNode(),this.val.state="release",this.nxTransmit(this.val),this.draw()},position.prototype.animate=function(t){switch(t){case"bounce":nx.aniItems.push(this.aniBounce.bind(this));break;case"none":nx.aniItems.splice(nx.aniItems.indexOf(this.aniBounce))}},position.prototype.aniBounce=function(){!this.clicked&&this.val.x&&(this.val.x+=this.deltaMove.x/2/this.width,this.val.y+=this.deltaMove.y/2/this.height,this.val.state="animated",math.bounce(this.val.x,0,1,this.deltaMove.x)!=this.deltaMove.x&&(this.deltaMove.x=math.bounce(this.val.x,0,1,this.deltaMove.x),this.val.state="bounce"),math.bounce(this.val.y,0,1,this.deltaMove.y)!=this.deltaMove.y&&(this.deltaMove.y=math.bounce(this.val.y,0,1,this.deltaMove.y),this.val.state="bounce"),this.nxTransmit(this.val),this.draw())}},{"../core/widget":3,"../utils/math":6,util:40}],27:[function(require,module,exports){var util=require("util"),widget=require("../core/widget"),math=require("../utils/math"),range=module.exports=function(t){this.defaultSize={width:30,height:100},widget.call(this,t),this.val={start:.3,stop:.7},this.hslider=!1,this.handle,this.relhandle,this.cap,this.firsttouch="start",this.init()};util.inherits(range,widget),range.prototype.init=function(){this.hslider=this.height>=this.width?!1:!0,this.realSpace={x:this.width-2*this.lineWidth,y:this.height-2*this.lineWidth},null!=this.canvas.getAttribute("label")&&(this.label=this.canvas.getAttribute("label")),this.draw()},range.prototype.draw=function(){with(this.erase(),this.makeRoundedBG(),this.context)if(strokeStyle=this.colors.border,fillStyle=this.colors.fill,lineWidth=this.lineWidth,stroke(),fill(),fillStyle=this.colors.accent,this.hslider){var x1=this.lineWidth+this.val.start*this.realSpace.x,y1=this.lineWidth,x2=this.lineWidth+this.val.stop*this.realSpace.x,y2=this.height-this.lineWidth;fillRect(x1,y1,x2-x1,y2-y1),nx.showLabels&&(textAlign="center",textBaseline="middle",font="bold 15px courier",fillStyle=this.colors.accent,globalAlpha=.3,fillText(this.label,this.width/2,this.height/2),globalAlpha=1)}else{var x1=this.lineWidth,y1=this.height-this.val.stop*this.height,x2=this.lineWidth+this.realSpace.x,y2=this.height-this.val.start*this.height;fillRect(x1,y1,x2-x1,y2-y1),nx.showLabels&&(save(),translate(this.width/2,0),rotate(Math.PI/2),textAlign="left",textBaseline="middle",font="bold 15px courier",fillStyle=this.colors.accent,globalAlpha=.3,fillText(this.label,this.width/2,0),globalAlpha=1,restore())}},range.prototype.click=function(){this.firsttouch=this.hslider?Math.abs(this.clickPos.x-this.val.start*this.width)<Math.abs(this.clickPos.x-this.val.stop*this.width)?"start":"stop":Math.abs(Math.abs(this.clickPos.y-this.height)-this.val.start*this.height)<Math.abs(Math.abs(this.clickPos.y-this.height)-this.val.stop*this.height)?"start":"stop",this.move()},range.prototype.move=function(){this.hslider?"start"==this.firsttouch?(this.val.start=this.clickPos.x/this.width,this.clickPos.touches.length>1&&(this.val.stop=this.clickPos.touches[1].x/this.width)):(this.val.stop=this.clickPos.x/this.width,this.clickPos.touches.length>1&&(this.val.start=this.clickPos.touches[1].x/this.width)):"start"==this.firsttouch?(this.val.start=math.invert(this.clickPos.y/this.height),this.clickPos.touches.length>1&&(this.val.stop=math.invert(this.clickPos.touches[1].y/this.height))):(this.val.stop=math.invert(this.clickPos.y/this.height),this.clickPos.touches.length>1&&(this.val.start=math.invert(this.clickPos.touches[1].y/this.height))),this.clicked&&(this.val.stop<this.val.start&&(this.tempstart=this.val.start,this.val.start=this.val.stop,this.val.stop=this.tempstart,this.firsttouch="start"==this.firsttouch?"stop":"start"),this.val={start:math.clip(this.val.start,0,1),stop:math.clip(this.val.stop,0,1)},this.val.size=math.prune(math.clip(Math.abs(this.val.stop-this.val.start),0,1),3),this.draw()),this.nxTransmit(this.val)
}},{"../core/widget":3,"../utils/math":6,util:40}],28:[function(t,i){var e=t("util"),s=t("../core/widget"),h=i.exports=function(t){this.defaultSize={width:200,height:30},s.call(this,t),this.choices=[],this.val=new Object};e.inherits(h,s),h.prototype.init=function(){this.canvas.ontouchstart=null,this.canvas.ontouchmove=null,this.canvas.ontouchend=null,this.canvas.getAttribute("choices")&&(this.choices=this.canvas.getAttribute("choices"),this.choices=this.choices.split(","));var t='<select id="'+this.canvasID+'" style="height:'+this.height+"px;width:"+this.width+"px;font-size:"+this.height/2+'px" onchange="'+this.canvasID+'.change(this)"></select><canvas height="1px" width="1px" style="display:none"></canvas>';$("#"+this.canvasID).replaceWith(t),this.canvas=document.getElementById(this.canvasID);for(var i=0;i<this.choices.length;i++){var e=document.createElement("option");e.text=this.choices[i],e.value=this.choices[i],this.canvas.add(e,null)}},h.prototype.change=function(t){this.val.text=t.value,this.nxTransmit(this.val)}},{"../core/widget":3,util:40}],29:[function(require,module,exports){var math=require("../utils/math"),util=require("util"),widget=require("../core/widget"),slider=module.exports=function(t){this.defaultSize={width:30,height:100},widget.call(this,t),this.val.value=.7,this.mode="absolute",this.hslider=!1,this.handle,this.relhandle,this.cap,this.init()};util.inherits(slider,widget),slider.prototype.init=function(){this.hslider=this.height>=this.width?!1:!0,this.realSpace={x:this.width-2*this.lineWidth,y:this.height-2*this.lineWidth},null!=this.canvas.getAttribute("label")&&(this.label=this.canvas.getAttribute("label")),this.draw()},slider.prototype.draw=function(){with(this.erase(),this.makeRoundedBG(),this.context)if(strokeStyle=this.colors.border,fillStyle=this.colors.fill,lineWidth=this.lineWidth,stroke(),fill(),fillStyle=this.colors.accent,this.hslider){var x1=this.lineWidth,y1=this.lineWidth,x2=this.lineWidth+this.val.value*this.realSpace.x,y2=this.height-this.lineWidth;this.val.value>.01&&fillRect(x1,y1,x2-x1,y2-y1),nx.showLabels&&(textAlign="center",textBaseline="middle",font="bold 15px courier",fillStyle=this.colors.accent,globalAlpha=.3,fillText(this.label,this.width/2,this.height/2),globalAlpha=1)}else{var x1=this.lineWidth,y1=this.height-this.val.value*this.height,x2=this.lineWidth+this.realSpace.x,y2=this.height-this.lineWidth;this.val.value>.01&&fillRect(x1,y1,x2-x1,y2-y1),nx.showLabels&&(save(),translate(this.width/2,0),rotate(Math.PI/2),textAlign="left",textBaseline="middle",font="bold 15px courier",fillStyle=this.colors.accent,globalAlpha=.3,fillText(this.label,this.width/2,0),globalAlpha=1,restore())}},slider.prototype.click=function(){this.move()},slider.prototype.move=function(){this.hslider?(this.handle=this.clickPos.x,this.relhandle=this.deltaMove.x,this.cap=this.width):(this.handle=this.clickPos.y,this.relhandle=-1*this.deltaMove.y,this.cap=this.height),"absolute"==this.mode?this.clicked&&(this.val.value=this.hslider?math.clip(this.clickPos.x/this.width,0,1):Math.abs(math.clip(this.clickPos.y/this.height,0,1)-1),this.draw()):"relative"==this.mode&&this.clicked&&(this.val.value=this.hslider?math.clip(this.val.value+this.deltaMove.x/this.width,0,1):math.clip(this.val.value+-1*this.deltaMove.y/this.height,0,1),this.draw()),this.nxTransmit(this.val)}},{"../core/widget":3,"../utils/math":6,util:40}],30:[function(require,module,exports){var util=require("util"),widget=require("../core/widget"),string=module.exports=function(t){this.defaultSize={width:100,height:150},widget.call(this,t),this.val={string:0,velocity:0},this.numberofstrings=8,this.strings=new Array,this.abovestring=new Array,this.friction=2;this.init()};util.inherits(string,widget),string.prototype.init=function(){stringdiv=this.height/(this.numberofstrings+1);for(var t=0;t<this.numberofstrings;t++)this.strings[t]={x1:this.lineWidth,y1:stringdiv*(1+t),x2:this.width-this.lineWidth,y2:stringdiv*(t+1),held:!1,vibrating:!1,force:0,maxstretch:0,stretch:0,direction:0,above:!1};this.draw(),nx.aniItems.push(this.draw.bind(this))},string.prototype.pulse=function(){this.draw()},string.prototype.setStrings=function(t){this.numberofstrings=t,this.strings=new Array,this.init()},string.prototype.draw=function(){with(this.erase(),this.makeRoundedBG(),this.context){strokeStyle=this.colors.border,fillStyle=this.colors.fill,lineWidth=this.lineWidth,stroke(),fill(),strokeStyle=this.colors.accent;for(var i=0;i<this.strings.length;i++){var st=this.strings[i];st.vibrating?(st.maxstretch<0&&(st.vibrating=!1,st.held=!1),st.stretch=st.stretch+st.direction,Math.abs(st.stretch)>st.maxstretch&&(st.direction*=-1,st.stretch=st.stretch+st.direction,st.maxstretch=st.maxstretch-this.friction,st.direction=st.direction/Math.abs(st.direction)*(st.maxstretch/1)),beginPath(),moveTo(st.x1,st.y1),quadraticCurveTo(this.width/2,st.y1+st.stretch,st.x2,st.y2),stroke(),closePath(),st.on=!0):st.held?(beginPath(),moveTo(st.x1,st.y1),quadraticCurveTo(this.clickPos.x,this.clickPos.y,st.x2,st.y2),stroke(),closePath(),st.on=!0):(beginPath(),moveTo(st.x1,st.y1),lineTo(st.x2,st.y2),stroke(),closePath(),st.on&&(st.on=!1))}}this.drawLabel()},string.prototype.click=function(){for(var t=0;t<this.numberofstrings;t++)this.strings[t].above=this.clickPos.y<this.strings[t].y1;this.draw()},string.prototype.move=function(){if(this.clicked)for(var t=0;t<this.strings.length;t++)this.strings[t].above!=this.clickPos.y<this.strings[t].y1&&(this.strings[t].held=!0,this.strings[t].above^=!0),this.strings[t].held&&Math.abs(this.clickPos.y-this.strings[t].y1)>this.height/(3*this.strings.length)&&this.pluck(t)},string.prototype.release=function(){for(var t=0;t<this.strings.length;t++)this.strings[t].held&&this.pluck(t)},string.prototype.pluck=function(t){var i=t;this.val={string:i,x:this.clickPos.x/this.width},this.nxTransmit(this.val),this.strings[i].held=!1,this.strings[i].force=this.clickPos.y-this.strings[i].y1,this.strings[i].maxstretch=Math.abs(this.clickPos.y-this.strings[i].y1),this.strings[i].stretch=this.clickPos.y-this.strings[i].y1,this.strings[i].vibrating=!0,this.strings[i].direction=(this.clickPos.y-this.strings[i].y1)/Math.abs(this.clickPos.y-this.strings[i].y1)*((this.clickPos.y-this.strings[i].y1)/-1.2)}},{"../core/widget":3,util:40}],31:[function(require,module,exports){var math=require("../utils/math"),util=require("util"),widget=require("../core/widget"),tilt=module.exports=function(t){this.defaultSize={width:50,height:50},widget.call(this,t),this.tiltLR,this.tiltFB,this.z,this.val={x:0,y:0,z:0},this.text="TILT",this.init()};util.inherits(tilt,widget),tilt.prototype.deviceOrientationHandler=function(){this.val={x:math.prune(this.tiltLR/90,3),y:math.prune(this.tiltFB/90,3),z:math.prune(this.z,3)},this.nxTransmit(this.val)},tilt.prototype.init=function(){var t=this;this.draw(),window.DeviceOrientationEvent?window.addEventListener("deviceorientation",function(i){t.tiltLR=i.gamma,t.tiltFB=i.beta,t.z=i.alpha,t.deviceOrientationHandler(),t.draw()},!1):window.OrientationEvent?window.addEventListener("MozOrientation",function(i){t.tiltLR=90*i.x,t.tiltFB=-90*i.y,t.z=i.z,t.deviceOrientationHandler(),t.draw()},!1):console.log("Not supported on your device or browser.")},tilt.prototype.draw=function(){with(this.erase(),this.context){strokeStyle=this.colors.border,fillStyle=this.colors.fill,lineWidth=this.lineWidth;var grd=this.context.createRadialGradient(this.width/3,this.height/5,this.width/20,this.width/3,this.height/5,this.width);grd.addColorStop(0,this.colors.white),grd.addColorStop(1,this.colors.accent),fillStyle=grd,fillStyle=this.colors.fill,fillRect(0,0,this.width,this.height),strokeStyle=this.colors.border,strokeRect(0,0,this.width,this.height),save(),translate(this.width/2,this.height/2),rotate(-this.val.x*Math.PI/2),translate(-this.width/2,-this.height/2),globalAlpha=.4,fillStyle=this.colors.accent,fillRect(-this.width,this.height*(this.val.y/2)+this.height/2,3*this.width,2*this.height),fillStyle=this.colors.accent,font="bold "+this.height/5+"px gill sans",textAlign="center",fillText(this.text,this.width/2,this.height*(this.val.y/2)+this.height/2+this.height/15),globalAlpha=1,restore()}this.drawLabel()}},{"../core/widget":3,"../utils/math":6,util:40}],32:[function(require,module,exports){var drawing=require("../utils/drawing"),util=require("util"),widget=require("../core/widget"),toggle=module.exports=function(t){this.defaultSize={width:50,height:50},widget.call(this,t);var i=this.height>this.width?this.width:this.height;console.log(i),this.fontsize=i/6,this.val=0,this.init()};util.inherits(toggle,widget),toggle.prototype.init=function(){this.draw()},toggle.prototype.draw=function(){with(this.context)clearRect(0,0,this.canvas.width,canvas.height);with(this.makeRoundedBG(),this.context)strokeStyle=this.colors.border,fillStyle=this.width>40&&this.height>40?this.colors.fill:this.val?this.colors.accent:this.colors.border,lineWidth=this.lineWidth,stroke(),fill();if(this.width>40&&this.height>40)if(this.val)with(drawing.makeRoundRect(this.context,this.bgLeft+this.padding,this.bgTop+this.padding,this.bgWidth-2*this.padding,this.bgHeight/2.1),this.context)fillStyle=this.colors.accent,strokeStyle=this.colors.accent,stroke(),fill(),fillStyle=this.colors.white,font="bold "+this.fontsize+"px gill sans",textAlign="center",fillText("on",this.canvas.width/2,this.bgHeight/4.5+this.lineWidth+this.padding+5);else with(drawing.makeRoundRect(this.context,this.bgLeft+this.padding,this.bgBottom-this.padding-this.bgHeight/2.1,this.bgWidth-2*this.padding,this.bgHeight/2.1),this.context)fillStyle=this.colors.border,strokeStyle=this.colors.border,stroke(),fill(),fillStyle=this.colors.white,font="bold "+this.fontsize+"px gill sans",textAlign="center",fillText("off",this.canvas.width/2,this.bgBottom-this.padding-this.bgHeight/4.5+5);else with(this.context)fillStyle=this.colors.white,font="bold "+this.fontsize+"px gill sans",textAlign="center",this.val?fillText("on",this.canvas.width/2,this.canvas.height/2+this.fontsize/3.5):fillText("off",this.canvas.width/2,this.canvas.height/2+this.fontsize/3.5);this.drawLabel()},toggle.prototype.click=function(){this.val=this.val?0:1,this.draw(),this.nxTransmit(this.val)}},{"../core/widget":3,"../utils/drawing":5,util:40}],33:[function(require,module,exports){var drawing=require("../utils/drawing"),util=require("util"),widget=require("../core/widget"),typewriter=module.exports=function(t){this.defaultSize={width:175,height:75},widget.call(this,t),this.letter="",this.keywid=this.width/14.5,this.keyhgt=this.height/5,this.val={key:"",ascii:0,on:0},this.rows=[[{symbol:"`",value:192,width:1,on:!1},{symbol:"1",value:49,width:1,on:!1},{symbol:"2",value:50,width:1,on:!1},{symbol:"3",value:51,width:1,on:!1},{symbol:"4",value:52,width:1,on:!1},{symbol:"5",value:53,width:1,on:!1},{symbol:"6",value:54,width:1,on:!1},{symbol:"7",value:55,width:1,on:!1},{symbol:"8",value:56,width:1,on:!1},{symbol:"9",value:57,width:1,on:!1},{symbol:"0",value:48,width:1,on:!1},{symbol:"-",value:189,width:1,on:!1},{symbol:"=",value:187,width:1,on:!1},{symbol:"delete",value:46,width:1.5,on:!1}],[{symbol:"tab",value:10,width:1.5,on:!1},{symbol:"q",value:81,width:1,on:!1},{symbol:"w",value:87,width:1,on:!1},{symbol:"e",value:69,width:1,on:!1},{symbol:"r",value:82,width:1,on:!1},{symbol:"t",value:84,width:1,on:!1},{symbol:"y",value:89,width:1,on:!1},{symbol:"u",value:85,width:1,on:!1},{symbol:"i",value:73,width:1,on:!1},{symbol:"o",value:79,width:1,on:!1},{symbol:"p",value:80,width:1,on:!1},{symbol:"[",value:219,width:1,on:!1},{symbol:"]",value:221,width:1,on:!1},{symbol:"\\",value:220,width:1,on:!1}],[{symbol:"caps",value:20,width:1.75,on:!1},{symbol:"a",value:65,width:1,on:!1},{symbol:"s",value:83,width:1,on:!1},{symbol:"d",value:68,width:1,on:!1},{symbol:"f",value:70,width:1,on:!1},{symbol:"g",value:71,width:1,on:!1},{symbol:"h",value:72,width:1,on:!1},{symbol:"j",value:74,width:1,on:!1},{symbol:"k",value:75,width:1,on:!1},{symbol:"l",value:76,width:1,on:!1},{symbol:";",value:186,width:1,on:!1},{symbol:"'",value:222,width:1,on:!1},{symbol:"enter",value:13,width:1.75,on:!1}],[{symbol:"shift",value:16,width:2.25,on:!1},{symbol:"z",value:90,width:1,on:!1},{symbol:"x",value:88,width:1,on:!1},{symbol:"c",value:67,width:1,on:!1},{symbol:"v",value:86,width:1,on:!1},{symbol:"b",value:66,width:1,on:!1},{symbol:"n",value:78,width:1,on:!1},{symbol:"m",value:77,width:1,on:!1},{symbol:",",value:10,width:1,on:!1},{symbol:".",value:10,width:1,on:!1},{symbol:"/",value:10,width:1,on:!1},{symbol:"shift",value:16,width:2.25,on:!1}],[{symbol:"fn",value:10,width:1,on:!1},{symbol:"ctrl",value:17,width:1,on:!1},{symbol:"opt",value:10,width:1,on:!1},{symbol:"cmd",value:10,width:1.25,on:!1},{symbol:"space",value:32,width:5,on:!1},{symbol:"cmd",value:10,width:1,on:!1},{symbol:"opt",value:10,width:1,on:!1},{symbol:"<",value:37,width:.81,on:!1},{symbol:"^",value:38,width:.81,on:!1},{symbol:"v",value:39,width:.81,on:!1},{symbol:">",value:40,width:.81,on:!1}]],document.addEventListener("keydown",this.type.bind(this)),document.addEventListener("keyup",this.untype.bind(this))};util.inherits(typewriter,widget),typewriter.prototype.init=function(){this.keywid=this.width/14.5,this.keyhgt=this.height/5,this.draw()},typewriter.prototype.draw=function(){with(this.erase(),this.context){strokeStyle=this.colors.border,fillStyle=this.colors.accent,lineWidth=1;for(var i=0;i<this.rows.length;i++)for(var currkeyL=0,j=0;j<this.rows[i].length;j++)this.val.key==this.rows[i][j].symbol&&(this.rows[i][j].on=this.val.on?!0:!1),drawing.makeRoundRect(this.context,currkeyL,i*this.keyhgt,this.keywid*this.rows[i][j].width,this.keyhgt,8),this.rows[i][j].on?(fillStyle=this.colors.accent,strokeStyle=this.colors.accent,fill(),stroke()):(fillStyle=this.colors.fill,strokeStyle=this.colors.border,fill(),stroke()),currkeyL+=this.keywid*this.rows[i][j].width;this.val.on&&(globalAlpha=.3,fillStyle=this.colors.border,font=this.height+"px courier",textAlign="center",fillText(this.val.key,this.width/2,this.height/1.25),globalAlpha=1)}this.drawLabel()},typewriter.prototype.click=function(){this.draw()},typewriter.prototype.type=function(t){for(var i=t.which,e=0;e<this.rows.length;e++)for(var s=0;s<this.rows[e].length;s++)if(i==this.rows[e][s].value){console.log(this.rows[e][s].symbol),this.val.key=this.rows[e][s].symbol,this.val.on=1,this.val.ascii=t.which,this.nxTransmit(this.val);break}this.draw()},typewriter.prototype.untype=function(t){for(var i=t.which,e=0;e<this.rows.length;e++)for(var s=0;s<this.rows[e].length;s++)if(i==this.rows[e][s].value){this.val.key=this.rows[e][s].symbol,this.val.on=0,this.val.ascii=t.which,this.nxTransmit(this.val);break}this.draw()}},{"../core/widget":3,"../utils/drawing":5,util:40}],34:[function(require,module,exports){var math=require("../utils/math"),util=require("util"),widget=require("../core/widget"),vinyl=module.exports=function(t){this.defaultSize={width:100,height:100},widget.call(this,t),this.circleSize=1,this.dial_position_length=6,this.accentWidth=this.width<101||this.width<101?1*this.lineWidth:2*this.lineWidth,this.val=.5,this.responsivity=.005,this.speed=.05,this.spokes=10,this.rotation=0,this.points=new Array,this.friction=.995,this.init()};util.inherits(vinyl,widget),vinyl.prototype.init=function(){this.circleSize=Math.min(this.center.x,this.center.y)-this.lineWidth,this.draw(),nx.aniItems.push(this.spin.bind(this))},vinyl.prototype.draw=function(){with(this.context)clearRect(0,0,this.width,this.height),strokeStyle=this.colors.border,fillStyle=this.colors.fill,lineWidth=this.lineWidth,beginPath(),fillStyle=this.colors.black,arc(this.center.x,this.center.y,this.circleSize-5,0,2*Math.PI,!0),fill(),closePath(),beginPath(),fillStyle=this.colors.accent,arc(this.center.x,1*this.center.y,this.circleSize/4,0,2*Math.PI,!1),fill(),closePath(),beginPath(),globalAlpha=.5,fillStyle=this.colors.fill,arc(this.center.x,this.center.y,this.circleSize,this.rotation,this.rotation+.4,!1),lineTo(this.center.x,this.center.y),arc(this.center.x,this.center.y,this.circleSize,this.rotation+Math.PI,this.rotation+Math.PI+.4,!1),lineTo(this.center.x,this.center.y),fill(),globalAlpha=1,closePath(),beginPath(),fillStyle=this.colors.white,arc(this.center.x,1*this.center.y,this.circleSize/16,0,2*Math.PI,!1),fill(),closePath(),lineWidth=4,strokeRect(0,0,this.width,this.height);this.drawLabel()},vinyl.prototype.click=function(){this.lastRotation=this.rotation,this.speed=0,this.grabAngle=this.rotation%(2*Math.PI),this.grabPos=math.toPolar(this.clickPos.x-this.center.x,this.clickPos.y-this.center.y).y},vinyl.prototype.move=function(){this.lastRotation2=this.lastRotation,this.lastRotation=this.rotation,this.rotation=math.toPolar(this.clickPos.x-this.center.x,this.clickPos.y-this.center.y).y+this.grabAngle-this.grabPos,this.draw(),this.val=this.rotation,this.speed=(this.rotation-this.lastRotation+(this.lastRotation-this.lastRotation2))/2,this.nxTransmit(this.val)},vinyl.prototype.release=function(){this.speed=(this.rotation-this.lastRotation+(this.lastRotation-this.lastRotation2))/2},vinyl.prototype.spin=function(){this.lastRotation2=this.lastRotation,this.lastRotation=this.rotation,this.rotation+=this.speed,this.draw(),this.rotation=this.rotation%(2*Math.PI),this.val=this.speed,this.nxTransmit(this.val)}},{"../core/widget":3,"../utils/math":6,util:40}],35:[function(require,module,exports){var math=require("../utils/math"),util=require("util"),widget=require("../core/widget"),wheel=module.exports=function(t){this.defaultSize={width:100,height:100},widget.call(this,t),this.circleSize=1,this.dial_position_length=6,this.accentWidth=this.width<101||this.width<101?1*this.lineWidth:2*this.lineWidth,this.val=.5,this.responsivity=.005,this.speed=.05,this.spokes=10,this.rotation=0,this.points=new Array,this.friction=.995,this.init()};util.inherits(wheel,widget),wheel.prototype.init=function(){this.circleSize=Math.min(this.center.x,this.center.y)-this.lineWidth,this.draw(),nx.aniItems.push(this.spin.bind(this))},wheel.prototype.draw=function(){with(this.context){clearRect(0,0,this.width,this.height),strokeStyle=this.colors.border,fillStyle=this.colors.fill,lineWidth=this.lineWidth,beginPath(),arc(this.center.x,this.center.y,this.circleSize-5,0,2*Math.PI,!0),fill(),closePath();for(var i=0;i<this.spokes;i++){var dot=math.toCartesian(this.circleSize-5,i/this.spokes*Math.PI*2-this.rotation+2*Math.PI/(2*this.spokes));beginPath(),arc(dot.x+this.center.x,dot.y+this.center.y,5,0,2*Math.PI,!1),fillStyle=this.colors.accent,fill(),closePath(),beginPath(),globalAlpha=.2,moveTo(this.center.x,1*this.center.y),lineTo(dot.x+this.center.x,dot.y+this.center.y),strokeStyle=this.colors.accent,stroke(),globalAlpha=1,closePath()}beginPath(),fillStyle=this.colors.fill,strokeStyle=this.colors.accent,stroke(),fill(),closePath(),beginPath(),fillStyle=this.colors.fill,arc(this.center.x,1*this.center.y,this.circleSize/12,0,2*Math.PI,!1),stroke(),fill(),closePath()}this.drawLabel()},wheel.prototype.click=function(){this.lastRotation=this.rotation,this.speed=0,this.grabAngle=this.rotation%(2*Math.PI),this.grabPos=math.toPolar(this.clickPos.x-this.center.x,this.clickPos.y-this.center.y).y},wheel.prototype.move=function(){if(this.lastRotation2=this.lastRotation,this.lastRotation=this.rotation,this.rotation=math.toPolar(this.clickPos.x-this.center.x,this.clickPos.y-this.center.y).y+this.grabAngle-this.grabPos,this.draw(),this.rotation<0&&(this.rotation+=2*Math.PI),this.rotation>2*Math.PI&&(this.rotation-=2*Math.PI),this.lastRotation>1.5*Math.PI&&this.rotation<.5*Math.PI&&0!=this.val)this.val=0,this.nxTransmit(this.val);else if(this.lastRotation<.5*Math.PI&&this.rotation>1.5*Math.PI&&0!=this.val)this.val=0,this.nxTransmit(this.val);else for(var t=0;t<this.spokes;t++)console.log(this.rotation),this.rotation-t/this.spokes*Math.PI*2>0&&this.lastRotation-t/this.spokes*Math.PI*2<0&&(this.val=t,this.nxTransmit(this.val)),this.rotation-t/this.spokes*Math.PI*2<0&&this.lastRotation-t/this.spokes*Math.PI*2>0&&(this.val=t,this.nxTransmit(this.val))},wheel.prototype.release=function(){this.speed=(this.rotation-this.lastRotation+(this.lastRotation-this.lastRotation2))/2},wheel.prototype.spin=function(){if(this.lastRotation2=this.lastRotation,this.lastRotation=this.rotation,this.rotation+=this.speed,this.speed*=this.friction,this.draw(),this.rotation=this.rotation%(2*Math.PI),this.rotation<0&&(this.rotation+=2*Math.PI),this.rotation>2*Math.PI&&(this.rotation-=2*Math.PI),this.lastRotation>1.5*Math.PI&&this.rotation<.5*Math.PI)this.val=0,this.nxTransmit(this.val);else if(this.lastRotation<.5*Math.PI&&this.rotation>1.5*Math.PI)this.val=0,this.nxTransmit(this.val);else for(var t=0;t<this.spokes;t++)this.rotation-t/this.spokes*Math.PI*2>0&&this.lastRotation-t/this.spokes*Math.PI*2<0&&(this.val=t,this.nxTransmit(this.val)),this.rotation-t/this.spokes*Math.PI*2<0&&this.lastRotation-t/this.spokes*Math.PI*2>0&&(this.val=t,this.nxTransmit(this.val))}},{"../core/widget":3,"../utils/math":6,util:40}],36:[function(t,i){function e(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(t){return"function"==typeof t}function h(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function n(t){return void 0===t}i.exports=e,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._maxListeners=void 0,e.defaultMaxListeners=10,e.prototype.setMaxListeners=function(t){if(!h(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},e.prototype.emit=function(t){var i,e,h,l,r,a;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(i=arguments[1],i instanceof Error)throw i;throw TypeError('Uncaught, unspecified "error" event.')}if(e=this._events[t],n(e))return!1;if(s(e))switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:for(h=arguments.length,l=new Array(h-1),r=1;h>r;r++)l[r-1]=arguments[r];e.apply(this,l)}else if(o(e)){for(h=arguments.length,l=new Array(h-1),r=1;h>r;r++)l[r-1]=arguments[r];for(a=e.slice(),h=a.length,r=0;h>r;r++)a[r].apply(this,l)}return!0},e.prototype.addListener=function(t,i){var h;if(!s(i))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,s(i.listener)?i.listener:i),this._events[t]?o(this._events[t])?this._events[t].push(i):this._events[t]=[this._events[t],i]:this._events[t]=i,o(this._events[t])&&!this._events[t].warned){var h;h=n(this._maxListeners)?e.defaultMaxListeners:this._maxListeners,h&&h>0&&this._events[t].length>h&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},e.prototype.on=e.prototype.addListener,e.prototype.once=function(t,i){function e(){this.removeListener(t,e),h||(h=!0,i.apply(this,arguments))}if(!s(i))throw TypeError("listener must be a function");var h=!1;return e.listener=i,this.on(t,e),this},e.prototype.removeListener=function(t,i){var e,h,n,l;if(!s(i))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(e=this._events[t],n=e.length,h=-1,e===i||s(e.listener)&&e.listener===i)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,i);else if(o(e)){for(l=n;l-->0;)if(e[l]===i||e[l].listener&&e[l].listener===i){h=l;break}if(0>h)return this;1===e.length?(e.length=0,delete this._events[t]):e.splice(h,1),this._events.removeListener&&this.emit("removeListener",t,i)}return this},e.prototype.removeAllListeners=function(t){var i,e;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(i in this._events)"removeListener"!==i&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events={},this}if(e=this._events[t],s(e))this.removeListener(t,e);else for(;e.length;)this.removeListener(t,e[e.length-1]);return delete this._events[t],this},e.prototype.listeners=function(t){var i;return i=this._events&&this._events[t]?s(this._events[t])?[this._events[t]]:this._events[t].slice():[]},e.listenerCount=function(t,i){var e;return e=t._events&&t._events[i]?s(t._events[i])?1:t._events[i].length:0}},{}],37:[function(t,i){i.exports="function"==typeof Object.create?function(t,i){t.super_=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,i){t.super_=i;var e=function(){};e.prototype=i.prototype,t.prototype=new e,t.prototype.constructor=t}},{}],38:[function(t,i){function e(){}var s=i.exports={};s.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,i="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(i){var e=[];return window.addEventListener("message",function(t){var i=t.source;if((i===window||null===i)&&"process-tick"===t.data&&(t.stopPropagation(),e.length>0)){var s=e.shift();s()}},!0),function(t){e.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),s.title="browser",s.browser=!0,s.env={},s.argv=[],s.on=e,s.addListener=e,s.once=e,s.off=e,s.removeListener=e,s.removeAllListeners=e,s.emit=e,s.binding=function(){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(){throw new Error("process.chdir is not supported")}},{}],39:[function(t,i){i.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],40:[function(t,i,e){(function(i,s){function h(t,i){var s={seen:[],stylize:n};return arguments.length>=3&&(s.depth=arguments[2]),arguments.length>=4&&(s.colors=arguments[3]),f(i)?s.showHidden=i:i&&e._extend(s,i),b(s.showHidden)&&(s.showHidden=!1),b(s.depth)&&(s.depth=2),b(s.colors)&&(s.colors=!1),b(s.customInspect)&&(s.customInspect=!0),s.colors&&(s.stylize=o),r(s,t,s.depth)}function o(t,i){var e=h.styles[i];return e?"["+h.colors[e][0]+"m"+t+"["+h.colors[e][1]+"m":t}function n(t){return t}function l(t){var i={};return t.forEach(function(t){i[t]=!0}),i}function r(t,i,s){if(t.customInspect&&i&&_(i.inspect)&&i.inspect!==e.inspect&&(!i.constructor||i.constructor.prototype!==i)){var h=i.inspect(s,t);return m(h)||(h=r(t,h,s)),h}var o=a(t,i);if(o)return o;var n=Object.keys(i),f=l(n);if(t.showHidden&&(n=Object.getOwnPropertyNames(i)),T(i)&&(n.indexOf("message")>=0||n.indexOf("description")>=0))return c(i);if(0===n.length){if(_(i)){var w=i.name?": "+i.name:"";return t.stylize("[Function"+w+"]","special")}if(k(i))return t.stylize(RegExp.prototype.toString.call(i),"regexp");if(P(i))return t.stylize(Date.prototype.toString.call(i),"date");if(T(i))return c(i)}var v="",y=!1,x=["{","}"];if(p(i)&&(y=!0,x=["[","]"]),_(i)){var b=i.name?": "+i.name:"";v=" [Function"+b+"]"}if(k(i)&&(v=" "+RegExp.prototype.toString.call(i)),P(i)&&(v=" "+Date.prototype.toUTCString.call(i)),T(i)&&(v=" "+c(i)),0===n.length&&(!y||0==i.length))return x[0]+v+x[1];if(0>s)return k(i)?t.stylize(RegExp.prototype.toString.call(i),"regexp"):t.stylize("[Object]","special");t.seen.push(i);var S;return S=y?d(t,i,s,f,n):n.map(function(e){return u(t,i,s,f,e,y)}),t.seen.pop(),g(S,v,x)}function a(t,i){if(b(i))return t.stylize("undefined","undefined");if(m(i)){var e="'"+JSON.stringify(i).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(e,"string")}return y(i)?t.stylize(""+i,"number"):f(i)?t.stylize(""+i,"boolean"):w(i)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function d(t,i,e,s,h){for(var o=[],n=0,l=i.length;l>n;++n)o.push(I(i,String(n))?u(t,i,e,s,String(n),!0):"");return h.forEach(function(h){h.match(/^\d+$/)||o.push(u(t,i,e,s,h,!0))}),o}function u(t,i,e,s,h,o){var n,l,a;if(a=Object.getOwnPropertyDescriptor(i,h)||{value:i[h]},a.get?l=a.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):a.set&&(l=t.stylize("[Setter]","special")),I(s,h)||(n="["+h+"]"),l||(t.seen.indexOf(a.value)<0?(l=w(e)?r(t,a.value,null):r(t,a.value,e-1),l.indexOf("\n")>-1&&(l=o?l.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+l.split("\n").map(function(t){return"   "+t}).join("\n"))):l=t.stylize("[Circular]","special")),b(n)){if(o&&h.match(/^\d+$/))return l;n=JSON.stringify(""+h),n.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(n=n.substr(1,n.length-2),n=t.stylize(n,"name")):(n=n.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),n=t.stylize(n,"string"))}return n+": "+l}function g(t,i,e){var s=0,h=t.reduce(function(t,i){return s++,i.indexOf("\n")>=0&&s++,t+i.replace(/\u001b\[\d\d?m/g,"").length+1},0);return h>60?e[0]+(""===i?"":i+"\n ")+" "+t.join(",\n  ")+" "+e[1]:e[0]+i+" "+t.join(", ")+" "+e[1]}function p(t){return Array.isArray(t)}function f(t){return"boolean"==typeof t}function w(t){return null===t}function v(t){return null==t}function y(t){return"number"==typeof t}function m(t){return"string"==typeof t}function x(t){return"symbol"==typeof t}function b(t){return void 0===t}function k(t){return S(t)&&"[object RegExp]"===M(t)}function S(t){return"object"==typeof t&&null!==t}function P(t){return S(t)&&"[object Date]"===M(t)}function T(t){return S(t)&&("[object Error]"===M(t)||t instanceof Error)}function _(t){return"function"==typeof t}function z(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function M(t){return Object.prototype.toString.call(t)}function W(t){return 10>t?"0"+t.toString(10):t.toString(10)}function R(){var t=new Date,i=[W(t.getHours()),W(t.getMinutes()),W(t.getSeconds())].join(":");return[t.getDate(),L[t.getMonth()],i].join(" ")}function I(t,i){return Object.prototype.hasOwnProperty.call(t,i)}var q=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var i=[],e=0;e<arguments.length;e++)i.push(h(arguments[e]));return i.join(" ")}for(var e=1,s=arguments,o=s.length,n=String(t).replace(q,function(t){if("%%"===t)return"%";if(e>=o)return t;switch(t){case"%s":return String(s[e++]);case"%d":return Number(s[e++]);case"%j":try{return JSON.stringify(s[e++])}catch(i){return"[Circular]"}default:return t}}),l=s[e];o>e;l=s[++e])n+=w(l)||!S(l)?" "+l:" "+h(l);return n},e.deprecate=function(t,h){function o(){if(!n){if(i.throwDeprecation)throw new Error(h);i.traceDeprecation?console.trace(h):console.error(h),n=!0}return t.apply(this,arguments)}if(b(s.process))return function(){return e.deprecate(t,h).apply(this,arguments)};if(i.noDeprecation===!0)return t;var n=!1;return o};var A,j={};e.debuglog=function(t){if(b(A)&&(A=i.env.NODE_DEBUG||""),t=t.toUpperCase(),!j[t])if(new RegExp("\\b"+t+"\\b","i").test(A)){var s=i.pid;j[t]=function(){var i=e.format.apply(e,arguments);console.error("%s %d: %s",t,s,i)}}else j[t]=function(){};return j[t]},e.inspect=h,h.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},h.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=f,e.isNull=w,e.isNullOrUndefined=v,e.isNumber=y,e.isString=m,e.isSymbol=x,e.isUndefined=b,e.isRegExp=k,e.isObject=S,e.isDate=P,e.isError=T,e.isFunction=_,e.isPrimitive=z,e.isBuffer=t("./support/isBuffer");var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",R(),e.format.apply(e,arguments))},e.inherits=t("inherits"),e._extend=function(t,i){if(!i||!S(i))return t;for(var e=Object.keys(i),s=e.length;s--;)t[e[s]]=i[e[s]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})
},{"./support/isBuffer":39,_process:38,inherits:37}]},{},[1]);