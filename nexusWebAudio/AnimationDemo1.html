<!doctype html>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="viewport" content="initial-scale=0.5, user-scalable=no"/>
	<title>Nexus Mobile Audio Interface Objects</title>
	<meta name="LSU EMDM" content="nexus">
	
	<script type="text/javascript" src="../nexusUI/jquery.js"></script>
	<script type="text/javascript" src="js/gibberish_2.0.js"></script>
	<script type="text/javascript" src="../nexusUI/nexusUI.js"></script>
	<script type="text/javascript" src="../nexusUI/nexusDial.js"></script>
	<script type="text/javascript" src="../nexusUI/nexusButton.js"></script>
	<script type="text/javascript" src="../nexusUI/nexusToggle.js"></script>
	<script type="text/javascript" src="../nexusUI/nexusPosition.js"></script>
	<script type="text/javascript" src="../nexusUI/nexusMatrix.js"></script>
	<script type="text/javascript" src="../nexusUI/nexusMultislider.js"></script>
	<script type="text/javascript" src="../nexusUI/nexusSlider.js"></script>
	<script type="text/javascript" src="../nexusUI/nexusKeyboard.js"></script>
	<link type="style/css" href="../nexusUI/nexusUI.css" rel="stylesheet">
	<script type="text/javascript" charset="utf-8">
	
		
		nx.onload = function() {
			
			nx.colorize("#08d");
			nx.setTransmissionProtocol("local");
			
		
			
			/* synth development */
			
				
			Gibberish.init(); 
			
			prefxBus = new Gibberish.Bus2();
			d = new Gibberish.Delay({input: prefxBus, time: 10000, feedback: 0.9});      // create a delay effect and feed our sine wave into it
			d.connect();                        // connect delay to default master output
			

			/* first synth row */	
			osc1 = new Gibberish.Sine2( 440, .2, 0 ); 
			mod1 = new Gibberish.Sine( 100, 50 );
			osc1.mod( 'frequency', mod1, '*' );
			dec1 = new Gibberish.Decimator({ input:osc1, bitDepth:16, sampleRate:1 }); 
			
			/* second synth row */	
			osc2 = new Gibberish.Sine2( 440, .2, 0 );
			mod2 = new Gibberish.Sine( 100, 50 );
			osc2.mod( 'frequency', mod2, '*' );
			dec2 = new Gibberish.Decimator({ input:osc2, bitDepth:16, sampleRate:1 }); 
			
			/* third synth row */	
			osc3 = new Gibberish.Sine2( 440, .2, 0 ); 
			mod3 = new Gibberish.Sine( 100, 50 );
			osc3.mod( 'frequency', mod3, '*' );
			dec3 = new Gibberish.Decimator({ input:osc3, bitDepth:16, sampleRate:1 }); 
		
		
			/* nexus routing to synth*/
		
			/* first  synth row */
			toggle1.localTransmit = function(localObjectFrom, localObject, localParameter, data) {
				if (data==1) {
					dec1.connect(prefxBus);
				} else {
					dec1.disconnect();
				}
			}
			
			position1.localTransmit = function(localObjectFrom, localObject, localParameter, data) {
				osc1.frequency = data[0] * 1000;
				osc1.amp = nx.invert(data[1]) - 0.1;
				osc1.pan = osc1.pan
			}
			
			position2.localTransmit = function(localObjectFrom, localObject, localParameter, data) {
				mod1.frequency = (Math.floor(data[0]*10)/10) * 1000;
				mod1.amp = nx.scale(data[1], 1, 0, 0, 50);
			}
			
			position3.localTransmit = function(localObjectFrom, localObject, localParameter, data) {
				osc1.pan = nx.scale(data[0], 0, 1, -1, 1);
				dec1.bitDepth = nx.scale(data[1], 0, 1, 0, 16);
			}
			
			
			/* second synth row */
			
			toggle2.localTransmit = function(localObjectFrom, localObject, localParameter, data) {
				if (data==1) {
					dec2.connect(prefxBus);
				} else {
					dec2.disconnect();
				}
			}
			
			position4.localTransmit = function(localObjectFrom, localObject, localParameter, data) {
				osc2.frequency = data[0] * 1000;
				osc2.amp = nx.invert(data[1]) - 0.1;
				osc2.pan = osc2.pan
			}
			
			position5.localTransmit = function(localObjectFrom, localObject, localParameter, data) {
				mod2.frequency = (Math.floor(data[0]*10)/10) * 2000;
				mod2.amp = nx.scale(data[1], 1, 0, 0, 50);
			}
			
			position6.localTransmit = function(localObjectFrom, localObject, localParameter, data) {
				osc2.pan = nx.scale(data[0], 0, 1, -1, 1);
				dec2.bitDepth = nx.scale(data[1], 0, 1, 0, 16);
			}
			
			
			/* third synth row */
			
			toggle3.localTransmit = function(localObjectFrom, localObject, localParameter, data) {
				if (data==1) {
					dec3.connect(prefxBus);
				} else {
					dec3.disconnect();
				}
			}
			
			position7.localTransmit = function(localObjectFrom, localObject, localParameter, data) {
				osc3.frequency = data[0] * 1000;
				osc3.amp = nx.invert(data[1]) - 0.1;
				osc3.pan = osc3.pan;
			}
			
			position8.localTransmit = function(localObjectFrom, localObject, localParameter, data) {
				mod3.frequency = (Math.floor(data[0]*10)/10) * 1500;
				mod3.amp = nx.scale(data[1], 1, 0, 0, 50);
			}
			
			position9.localTransmit = function(localObjectFrom, localObject, localParameter, data) {
				osc3.pan = nx.scale(data[0], 0, 1, -1, 1);
				dec3.bitDepth = nx.scale(data[1], 0, 1, 0, 16);
			}
			
			
			
			position1.animate("bounce");
			position3.animate("bounce");
			position4.animate("bounce");
			position6.animate("bounce");
			position7.animate("bounce");
			position9.animate("bounce");
			
			position2.animate("bounce");
			position5.animate("bounce");
			position8.animate("bounce");
			nx.startPulse();
			
			
		}
		
			
		
	</script>
	
</head>
<body>
	
	<style>
		.drone2D {
			width:175px;height:150px;
		}
		.fxDial{
			width:100px;
			height:75px;
		}
	</style>
	
	<div style="font-family:gill sans;padding:10px;background-color:#eee;width:600px;margin-bottom:10px">
		<span style="font-size:25pt;">
			nexus
		</span>
		<span style="font-size:15pt;">
			animation demo
		</span>
	</div>
	
	<div>
		<canvas nx="toggle"></canvas>
		<canvas nx="position" class="drone2D"></canvas>
		<canvas nx="position" class="drone2D"></canvas>
		<canvas nx="position" class="drone2D"></canvas>
	</div>
	<div>
		<canvas nx="toggle"></canvas>
		<canvas nx="position" class="drone2D"></canvas>
		<canvas nx="position" class="drone2D"></canvas>
		<canvas nx="position" class="drone2D"></canvas>
	</div>
	<div>
		<canvas nx="toggle"></canvas>
		<canvas nx="position" class="drone2D"></canvas>
		<canvas nx="position" class="drone2D"></canvas>
		<canvas nx="position" class="drone2D"></canvas>
	</div>
	
</body>
</html>
